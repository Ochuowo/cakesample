{"version":3,"sources":["constants/userConstants.js","constants/orderConstants.js","actions/userActions.js","components/SearchBox.js","components/Header.js","components/Footer.js","components/Rating.js","components/Product.js","components/Paginate.js","components/Message.js","constants/productConstants.js","actions/productActions.js","components/BasicSkeleton.js","components/SkeletonShimmer.js","components/CarouselSkeleton.js","components/ProductCarousel.js","components/Meta.js","components/ProductSkeleton.js","pages/HomePage.js","components/ImageMagnifier.js","components/Loader.js","actions/orderActions.js","utils/getDateString.js","pages/ProductPage.js","constants/cartConstants.js","actions/cartActions.js","pages/CartPage.js","components/FormContainer.js","assets/googleLogo.png","assets/twitterLogo.png","components/SocialLoginOptions.js","assets/githubLogo.png","assets/facebookLogo.png","pages/LoginPage.js","pages/RegisterPage.js","pages/ProfilePage.js","pages/ConfirmPage.js","components/CheckoutStatus.js","pages/ShippingPage.js","pages/PaymentPage.js","pages/PlaceOrderPage.js","components/CheckoutForm.js","pages/OrderPage.js","pages/PasswordResetPage.js","pages/UserListPage.js","pages/UserEditPage.js","pages/ProductListPage.js","pages/ProductEditPage.js","pages/OrderListPage.js","assets/404Error.png","pages/ErrorPage.js","serviceWorkerRegistration.js","ServiceWorkerWrapper.js","App.js","store.js","reducers/productReducers.js","reducers/cartReducers.js","reducers/userReducers.js","reducers/orderReducers.js","index.js"],"names":["USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGIN_FAILURE","USER_LOGIN_REFRESH_REQUEST","USER_LOGIN_REFRESH_SUCCESS","USER_LOGIN_REFRESH_FAILURE","USER_LOGOUT","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAILURE","USER_RESET_PASSWORD_REQUEST","USER_RESET_PASSWORD_SUCCESS","USER_RESET_PASSWORD_FAILURE","USER_EMAIL_VERIFICATION_REQUEST","USER_EMAIL_VERIFICATION_SUCCESS","USER_EMAIL_VERIFICATION_FAILURE","USER_CONFIRM_REQUEST","USER_CONFIRM_SUCCESS","USER_CONFIRM_FAILURE","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_DETAILS_FAILURE","USER_DETAILS_RESET","USER_PROFILE_UPDATE_REQUEST","USER_PROFILE_UPDATE_SUCCESS","USER_PROFILE_UPDATE_FAILURE","USER_PROFILE_UPDATE_RESET","USER_LIST_REQUEST","USER_LIST_SUCCESS","USER_LIST_FAILURE","USER_LIST_RESET","USER_DELETE_REQUEST","USER_DELETE_SUCCESS","USER_DELETE_FAILURE","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAILURE","USER_UPDATE_RESET","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_CREATE_FAILURE","ORDER_CREATE_RESET","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAILURE","ORDER_PAY_REQUEST","ORDER_PAY_SUCCESS","ORDER_PAY_FAILURE","ORDER_PAY_RESET","ORDER_DELIVER_REQUEST","ORDER_DELIVER_SUCCESS","ORDER_DELIVER_FAILURE","ORDER_DELIVER_RESET","ORDER_USER_LIST_REQUEST","ORDER_USER_LIST_SUCCESS","ORDER_USER_LIST_FAILURE","ORDER_USER_LIST_RESET","ORDER_ALL_LIST_REQUEST","ORDER_ALL_LIST_SUCCESS","ORDER_ALL_LIST_FAILURE","refreshLogin","email","dispatch","getState","type","userInfo","userLogin","isSocialLogin","payload","config","headers","axios","post","token","refreshToken","data","success","updatedUser","accessToken","localStorage","setItem","JSON","stringify","removeItem","response","message","getUserDetails","id","Authorization","get","updateUserProfile","user","isSocial","put","SearchBox","history","useState","keyword","setKeyword","Form","onSubmit","e","preventDefault","trim","push","className","InputGroup","Control","style","border","borderRight","name","onChange","target","value","placeholder","Text","background","borderLeft","margin","outline","padding","color","Header","useDispatch","useSelector","state","cart","cartItems","show1","setShow1","show2","setShow2","count","setCount","useEffect","reduce","acc","item","qty","handleLogout","window","location","href","display","innerHeight","minWidth","height","zIndex","position","onClick","Navbar","bg","variant","expand","Container","to","Brand","src","alt","render","Nav","justifyContent","isAdmin","Link","fontSize","innerWidth","NavDropdown","title","show","Item","avatar","Footer","rel","Rating","text","map","ele","idx","defaultProps","Product","product","Card","_id","Img","loading","image","Body","textDecoration","Title","as","rating","numReviews","price","toLocaleString","maximumFractionDigits","currency","Paginate","pages","page","forOrders","forUsers","Pagination","Array","keys","active","Number","Message","duration","children","dismissible","visible","setVisible","setTimeout","Alert","onClose","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","PRODUCT_LIST_FAILURE","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_DETAILS_FAILURE","PRODUCT_DELETE_REQUEST","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_FAILURE","PRODUCT_CREATE_REQUEST","PRODUCT_CREATE_SUCCESS","PRODUCT_CREATE_FAILURE","PRODUCT_CREATE_RESET","PRODUCT_UPDATE_REQUEST","PRODUCT_UPDATE_SUCCESS","PRODUCT_UPDATE_FAILURE","PRODUCT_UPDATE_RESET","PRODUCT_CREATE_REVIEW_REQUEST","PRODUCT_CREATE_REVIEW_SUCCESS","PRODUCT_CREATE_REVIEW_FAILURE","PRODUCT_CREATE_REVIEW_RESET","PRODUCT_TOP_RATED_REQUEST","PRODUCT_TOP_RATED_SUCCESS","PRODUCT_TOP_RATED_FAILURE","listProducts","pageNumber","pageSize","listProductDetails","BasicSkeleton","classes","SkeletonShimmer","CarouselSkeleton","overflow","ProductCarousel","productTopRated","error","products","Carousel","marginTop","pause","indicators","interval","CarouselItem","Image","fluid","Caption","Meta","description","keywords","content","ProductSkeleton","HomePage","match","params","promptVerfication","setPromptVerification","setProducts","productAvailable","setProductAvailable","productList","userInfoError","userDetails","parse","getItem","length","Row","Col","sm","md","lg","xl","ImageMagnifier","width","magnifierHeight","magnifieWidth","zoomLevel","x","y","setXY","imgWidth","imgHeight","setSize","showMagnifier","setShowMagnifier","onMouseEnter","currentTarget","getBoundingClientRect","onMouseMove","top","left","pageX","pageXOffset","pageY","pageYOffset","onMouseLeave","pointerEvents","opacity","backgroundColor","backgroundImage","backgroundRepeat","borderRadius","backgroundSize","backgroundPositionX","backgroundPositionY","Loader","Spinner","animation","role","payOrder","orderID","paymentResult","listMyOrders","getDateString","date","showTime","options","year","month","day","timeStr","Date","toLocaleTimeString","timeStyle","hour12","timeZone","result","toLocaleDateString","ProductPage","quantity","setQuantity","setRating","review","setReview","allReviews","setAllReviews","hasOrderedItem","setHasOrderedItem","showReviewForm","setShowReviewForm","productDetails","userLoginError","productCreateReview","loadingCreateReview","successCreateReview","errorCreateReview","orders","orderListUser","alert","reviews","flag","obj","orderItems","toString","sortedArr","sort","a","b","createdAt","ListGroup","countInStock","Button","disabled","productID","createProductReview","Group","controlId","default","FloatingLabel","label","row","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_RESET","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","addItem","console","savePaymentMethod","log","CartPage","totalItems","setTotalItems","search","split","handleRemoveFromCart","alignItems","rounded","ButtonGroup","size","FormContainer","xs","SocialLoginOptions","baseURL","process","fleFlow","objectFit","googleLogo","twitterLogo","LoginPage","authFailedMsg","setAuthFailedMsg","showRedirectMsg","setShowRedirectMsg","forgotPassword","setForgotPassword","showLoading","setShowLoading","emailSent","setEmailSent","setType","setEmail","password","setPassword","redirect","storedInfo","includes","queries","isSuccess","then","userData","isConfirmed","handleEmailSubmit","boxShadow","WebkitBoxShadow","MozBoxShadow","cursor","loginUser","required","stopPropagation","marginLeft","RegisterPage","typePassword","setTypePassword","typeConfirmPassword","setTypeConfirmPassword","setName","confirmPassword","setConfirmPassword","setMessage","userRegister","registerUser","ProfilePage","inputFile","useRef","showSubmitButton","setShowSubmitButton","setAvatar","allOrders","setAllOrders","uploading","setUploading","errorImageUpload","setErrorImageUpload","userProfileUpdate","loadingOrdersList","errorOrdersList","userSendEmailVerfication","hasError","handleImageUpload","file","files","formData","FormData","append","fontWeight","focus","sendVerficationEmail","flexFlow","alignSelf","marginBottom","current","click","accept","ref","Table","striped","bordered","responsive","order","textAlign","totalPrice","isPaid","paidAt","isDelivered","deliveredAt","ConfirmPage","userConfirm","isLoggedIn","setIsLoggedIn","emailToken","alreadyLoggedIn","confirmUser","CheckoutStatus","step1","step2","step3","step4","ShippingPage","shippingAddress","address","setAddress","city","setCity","postalCode","setPostalCode","country","setCountry","PaymentPage","paymentMethod","setPaymentMethod","handleChange","Check","inline","checked","PlaceOrderPage","orderCreate","itemsPrice","shippingPrice","taxPrice","createOrder","CheckoutForm","setError","clientSecret","setClientSecret","stripe","useStripe","elements","useElements","getClientSecret","makePayment","confirmCardPayment","payment_method","card","getElement","CardElement","billing_details","paymentIntent","paymentMode","reload","base","invalid","OrderPage","stripePromise","loadStripe","SDKReady","setSDKReady","orderDetails","orderPay","loadingPay","successPay","orderDeliver","loadingDeliver","successDeliver","getOrderDetails","addScript","clientID","script","document","createElement","async","onload","body","appendChild","shape","layout","amount","toFixed","onSuccess","deliverOrder","PasswordResetPage","userResetPassword","resetPassword","nameFromLocalStorage","passwordToken","resetUserPassword","paddingLeft","UserListPage","userList","users","total","successDelete","userDelete","listAllUsers","handleDelete","confirm","delete","deleteUser","UserEditPage","userId","setIsAdmin","userUpdate","loadingUpdate","errorUpdate","successUpdate","newUserInfo","updateUser","Label","ProductListPage","productDelete","loadingDelete","errorDelete","productCreate","loadingCreate","successCreate","errorCreate","createdProduct","deleteProduct","category","brand","ProductEditPage","productId","setBrand","setCategory","setDescription","setImage","setPrice","setCountInStock","productUpdate","handleFileUpload","updateProduct","min","max","step","orderListAll","listAllOrders","ErrorPage","errorImg","isLocalhost","Boolean","hostname","register","navigator","URL","origin","addEventListener","swUrl","fetch","contentType","status","indexOf","serviceWorker","ready","registration","unregister","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","ServiceWorkerWrapper","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","serviceWorkerRegistration","reloadPage","postMessage","ToastContainer","Toast","App","path","component","exact","OrderListPage","reducer","combineReducers","action","existingItem","find","filter","userLoginRefresh","tokenInfo","isLoading","cartItemsFromLocalStorage","userInfoFromLocalStorage","shippingAddressFromLocalStorage","tokenInfoFromLocalStoage","initialState","middleware","thunk","store","createStore","composeWithDevTools","applyMiddleware","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e8c01093.chunk.js","sourcesContent":["export const USER_LOGIN_REQUEST = 'USER_LOGIN_REQUEST';\r\nexport const USER_LOGIN_SUCCESS = 'USER_LOGIN_SUCCESS';\r\nexport const USER_LOGIN_FAILURE = 'USER_LOGIN_FAILURE';\r\nexport const USER_LOGIN_REFRESH_REQUEST = 'USER_LOGIN_REFRESH_REQUEST';\r\nexport const USER_LOGIN_REFRESH_SUCCESS = 'USER_LOGIN_REFRESH_SUCCESS';\r\nexport const USER_LOGIN_REFRESH_FAILURE = 'USER_LOGIN_REFRESH_FAILURE';\r\nexport const USER_LOGOUT = 'USER_LOGOUT';\r\n\r\nexport const USER_REGISTER_REQUEST = 'USER_REGISTER_REQUEST';\r\nexport const USER_REGISTER_SUCCESS = 'USER_REGISTER_SUCCESS';\r\nexport const USER_REGISTER_FAILURE = 'USER_REGISTER_FAILURE';\r\n\r\nexport const USER_RESET_PASSWORD_REQUEST = 'USER_RESET_PASSWORD_REQUEST';\r\nexport const USER_RESET_PASSWORD_SUCCESS = 'USER_RESET_PASSWORD_SUCCESS';\r\nexport const USER_RESET_PASSWORD_FAILURE = 'USER_RESET_PASSWORD_FAILURE';\r\n\r\n// To send the email verification link\r\nexport const USER_EMAIL_VERIFICATION_REQUEST =\r\n\t'USER_EMAIL_VERIFICATION_REQUEST';\r\nexport const USER_EMAIL_VERIFICATION_SUCCESS =\r\n\t'USER_EMAIL_VERIFICATION_SUCCESS';\r\nexport const USER_EMAIL_VERIFICATION_FAILURE =\r\n\t'USER_EMAIL_VERIFICATION_FAILURE';\r\n\r\n// To actually verify the email token and confirm the user email\r\nexport const USER_CONFIRM_REQUEST = 'USER_CONFIRM_REQUEST';\r\nexport const USER_CONFIRM_SUCCESS = 'USER_CONFIRM_SUCCESS';\r\nexport const USER_CONFIRM_FAILURE = 'USER_CONFIRM_FAILURE';\r\n\r\nexport const USER_DETAILS_REQUEST = 'USER_DETAILS_REQUEST';\r\nexport const USER_DETAILS_SUCCESS = 'USER_DETAILS_SUCCESS';\r\nexport const USER_DETAILS_FAILURE = 'USER_DETAILS_FAILURE';\r\nexport const USER_DETAILS_RESET = 'USER_DETAILS_RESET';\r\n\r\nexport const USER_PROFILE_UPDATE_REQUEST = 'USER_PROFILE_UPDATE_REQUEST';\r\nexport const USER_PROFILE_UPDATE_SUCCESS = 'USER_PROFILE_UPDATE_SUCCESS';\r\nexport const USER_PROFILE_UPDATE_FAILURE = 'USER_PROFILE_UPDATE_FAILURE';\r\nexport const USER_PROFILE_UPDATE_RESET = 'USER_PROFILE_UPDATE_RESET';\r\n\r\nexport const USER_LIST_REQUEST = 'USER_LIST_REQUEST';\r\nexport const USER_LIST_SUCCESS = 'USER_LIST_SUCCESS';\r\nexport const USER_LIST_FAILURE = 'USER_LIST_FAILURE';\r\nexport const USER_LIST_RESET = 'USER_LIST_RESET';\r\n\r\nexport const USER_DELETE_REQUEST = 'USER_DELETE_REQUEST';\r\nexport const USER_DELETE_SUCCESS = 'USER_DELETE_SUCCESS';\r\nexport const USER_DELETE_FAILURE = 'USER_DELETE_FAILURE';\r\n\r\nexport const USER_UPDATE_REQUEST = 'USER_UPDATE_REQUEST';\r\nexport const USER_UPDATE_SUCCESS = 'USER_UPDATE_SUCCESS';\r\nexport const USER_UPDATE_FAILURE = 'USER_UPDATE_FAILURE';\r\nexport const USER_UPDATE_RESET = 'USER_UPDATE_RESET';\r\n","export const ORDER_CREATE_REQUEST = 'ORDER_CREATE_REQUEST';\r\nexport const ORDER_CREATE_SUCCESS = 'ORDER_CREATE_SUCCESS';\r\nexport const ORDER_CREATE_FAILURE = 'ORDER_CREATE_FAILURE';\r\nexport const ORDER_CREATE_RESET = 'ORDER_CREATE_RESET';\r\n\r\nexport const ORDER_DETAILS_REQUEST = 'ORDER_DETAILS_REQUEST';\r\nexport const ORDER_DETAILS_SUCCESS = 'ORDER_DETAILS_SUCCESS';\r\nexport const ORDER_DETAILS_FAILURE = 'ORDER_DETAILS_FAILURE';\r\n\r\nexport const ORDER_PAY_REQUEST = 'ORDER_PAY_REQUEST';\r\nexport const ORDER_PAY_SUCCESS = 'ORDER_PAY_SUCCESS';\r\nexport const ORDER_PAY_FAILURE = 'ORDER_PAY_FAILURE';\r\nexport const ORDER_PAY_RESET = 'ORDER_PAY_RESET';\r\n\r\nexport const ORDER_DELIVER_REQUEST = 'ORDER_DELIVER_REQUEST';\r\nexport const ORDER_DELIVER_SUCCESS = 'ORDER_DELIVER_SUCCESS';\r\nexport const ORDER_DELIVER_FAILURE = 'ORDER_DELIVER_FAILURE';\r\nexport const ORDER_DELIVER_RESET = 'ORDER_DELIVER_RESET';\r\n\r\nexport const ORDER_USER_LIST_REQUEST = 'ORDER_USER_LIST_REQUEST';\r\nexport const ORDER_USER_LIST_SUCCESS = 'ORDER_USER_LIST_SUCCESS';\r\nexport const ORDER_USER_LIST_FAILURE = 'ORDER_USER_LIST_FAILURE';\r\nexport const ORDER_USER_LIST_RESET = 'ORDER_USER_LIST_RESET';\r\n\r\nexport const ORDER_ALL_LIST_REQUEST = 'ORDER_ALL_LIST_REQUEST';\r\nexport const ORDER_ALL_LIST_SUCCESS = 'ORDER_ALL_LIST_SUCCESS';\r\nexport const ORDER_ALL_LIST_FAILURE = 'ORDER_ALL_LIST_FAILURE';\r\n","import {\r\n\tUSER_LOGIN_REQUEST,\r\n\tUSER_LOGIN_SUCCESS,\r\n\tUSER_LOGIN_FAILURE,\r\n\tUSER_LOGIN_REFRESH_REQUEST,\r\n\tUSER_LOGIN_REFRESH_SUCCESS,\r\n\tUSER_LOGIN_REFRESH_FAILURE,\r\n\tUSER_LOGOUT,\r\n\tUSER_REGISTER_REQUEST,\r\n\tUSER_REGISTER_SUCCESS,\r\n\tUSER_REGISTER_FAILURE,\r\n\tUSER_RESET_PASSWORD_REQUEST,\r\n\tUSER_RESET_PASSWORD_SUCCESS,\r\n\tUSER_RESET_PASSWORD_FAILURE,\r\n\tUSER_EMAIL_VERIFICATION_REQUEST,\r\n\tUSER_EMAIL_VERIFICATION_SUCCESS,\r\n\tUSER_EMAIL_VERIFICATION_FAILURE,\r\n\tUSER_CONFIRM_REQUEST,\r\n\tUSER_CONFIRM_SUCCESS,\r\n\tUSER_CONFIRM_FAILURE,\r\n\tUSER_DETAILS_REQUEST,\r\n\tUSER_DETAILS_SUCCESS,\r\n\tUSER_DETAILS_FAILURE,\r\n\tUSER_DETAILS_RESET,\r\n\tUSER_PROFILE_UPDATE_REQUEST,\r\n\tUSER_PROFILE_UPDATE_SUCCESS,\r\n\tUSER_PROFILE_UPDATE_FAILURE,\r\n\tUSER_LIST_REQUEST,\r\n\tUSER_LIST_SUCCESS,\r\n\tUSER_LIST_FAILURE,\r\n\tUSER_DELETE_REQUEST,\r\n\tUSER_DELETE_SUCCESS,\r\n\tUSER_DELETE_FAILURE,\r\n\tUSER_UPDATE_REQUEST,\r\n\tUSER_UPDATE_SUCCESS,\r\n\tUSER_UPDATE_FAILURE,\r\n} from '../constants/userConstants';\r\nimport {\r\n\tORDER_CREATE_RESET,\r\n\tORDER_USER_LIST_RESET,\r\n} from '../constants/orderConstants';\r\nimport axios from 'axios';\r\n\r\n// login an user, can be a social login or a normal email verified login\r\nexport const loginUser = (email, password) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_LOGIN_REQUEST });\r\n\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/login',\r\n\t\t\t{ email, password },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: false },\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_REFRESH_SUCCESS,\r\n\t\t\tpayload: data.refreshToken,\r\n\t\t});\r\n\t\t// store the refresh token and the rest of the user info in the local storage\r\n\t\tlocalStorage.setItem('refreshToken', data.refreshToken);\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'userInfo',\r\n\t\t\tJSON.stringify({ ...data, isSocialLogin: false })\r\n\t\t);\r\n\t\t// remove the variable that helps prompt the user that email is not verified, each time they login\r\n\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// used for refreshing the access tokens when the user logs in using email and password\r\nexport const refreshLogin = (email) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_LOGIN_REFRESH_REQUEST });\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// avoid this if social login\r\n\t\tif (userInfo.isSocialLogin) {\r\n\t\t\tdispatch({ type: USER_LOGIN_REFRESH_SUCCESS, payload: null });\r\n\t\t} else {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/users/refresh',\r\n\t\t\t\t{\r\n\t\t\t\t\temail,\r\n\t\t\t\t\ttoken: userInfo.refreshToken,\r\n\t\t\t\t},\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tif (data.success) {\r\n\t\t\t\tdispatch({ type: USER_LOGIN_REFRESH_SUCCESS, payload: data });\r\n\t\t\t\tconst updatedUser = {\r\n\t\t\t\t\t...userInfo,\r\n\t\t\t\t\taccessToken: data.accessToken,\r\n\t\t\t\t\trefreshToken: userInfo.refreshToken,\r\n\t\t\t\t};\r\n\t\t\t\t// update the local storage\r\n\t\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(updatedUser));\r\n\t\t\t\tdispatch({ type: USER_LOGIN_SUCCESS, payload: updatedUser });\r\n\t\t\t} else if (!data.success) {\r\n\t\t\t\t// set a variable in local storage which redirects to login page, if this refresh thing fails\r\n\t\t\t\tlocalStorage.removeItem('userInfo');\r\n\t\t\t\tlocalStorage.setItem('redirectLogin', 'true'); // after refresh token also expires, redirect to login page after loggin out the user\r\n\t\t\t\tdispatch({ type: USER_LOGOUT });\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_REFRESH_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// logout by removing all local storage info\r\nexport const logoutUser = () => (dispatch) => {\r\n\tlocalStorage.removeItem('userInfo');\r\n\tlocalStorage.removeItem('redirectLogin');\r\n\tlocalStorage.removeItem('cartItems');\r\n\tdispatch({ type: USER_LOGOUT });\r\n\tdispatch({ type: USER_DETAILS_RESET });\r\n\tdispatch({ type: ORDER_CREATE_RESET });\r\n\tdispatch({ type: ORDER_USER_LIST_RESET });\r\n};\r\n\r\n// register a new user with the form for name, email, password\r\nexport const registerUser = (name, email, password) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_REGISTER_REQUEST });\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/',\r\n\t\t\t{ name, email, password },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: USER_REGISTER_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_REGISTER_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// send an email for verification of the newly registered account\r\nexport const sendVerficationEmail = (email) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_EMAIL_VERIFICATION_REQUEST });\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/confirm',\r\n\t\t\t{ email },\r\n\t\t\tconfig\r\n\t\t);\r\n\t\tdispatch({ type: USER_EMAIL_VERIFICATION_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_EMAIL_VERIFICATION_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// take the email token sent from the mail, and confirm the account once the link is clicked\r\nexport const confirmUser =\r\n\t(emailToken, alreadyLoggedIn = false) =>\r\n\tasync (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: USER_CONFIRM_REQUEST });\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/users/confirm/${emailToken}`\r\n\t\t\t);\r\n\r\n\t\t\t// remove variable meant to prompt the user for email verification\r\n\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t\tdispatch({ type: USER_CONFIRM_SUCCESS, payload: true });\r\n\r\n\t\t\tif (alreadyLoggedIn) {\r\n\t\t\t\tdispatch({ type: USER_LOGIN_SUCCESS, payload: data });\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: USER_LOGIN_REFRESH_SUCCESS,\r\n\t\t\t\t\tpayload: data.refreshToken,\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem('refreshToken', data.refreshToken);\r\n\t\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(data));\r\n\t\t\t}\r\n\r\n\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_CONFIRM_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// reset the user password and send one more verification email from the server\r\nexport const resetUserPassword =\r\n\t(passwordToken, password) => async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: USER_RESET_PASSWORD_REQUEST });\r\n\r\n\t\t\t// make the api call to reset the password\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.put(\r\n\t\t\t\t'/api/users/reset',\r\n\t\t\t\t{ passwordToken, password },\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: USER_RESET_PASSWORD_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_RESET_PASSWORD_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// get user details for profile page\r\nexport const getUserDetails = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_DETAILS_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tif (userInfo.isSocialLogin) {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tlet { data } = await axios.post(\r\n\t\t\t\t'/api/users/passport/data/',\r\n\t\t\t\t{ id },\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_DETAILS_SUCCESS,\r\n\t\t\t\tpayload: { ...data, isSocialLogin: true },\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.get(`/api/users/${id}`, config);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_DETAILS_SUCCESS,\r\n\t\t\t\tpayload: { ...data, isSocialLogin: false },\r\n\t\t\t});\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_DETAILS_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update details in the user profile page\r\nexport const updateUserProfile = (user) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_PROFILE_UPDATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst isSocial = userInfo.isSocialLogin;\r\n\t\tconst { data } = await axios.put('/api/users/profile', user, config);\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: USER_PROFILE_UPDATE_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: isSocial },\r\n\t\t});\r\n\r\n\t\t// login the user after updating the information\r\n\t\tdispatch({\r\n\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: isSocial },\r\n\t\t});\r\n\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'userInfo',\r\n\t\t\tJSON.stringify({ ...data, isSocialLogin: isSocial })\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_PROFILE_UPDATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// fetch a list of all users, for the admin panel view\r\nexport const listAllUsers =\r\n\t(pageNumber = '') =>\r\n\tasync (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: USER_LIST_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/users?pageNumber=${pageNumber}`,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: USER_LIST_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_LIST_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// delete the user from the admin panel view\r\nexport const deleteUser = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_DELETE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tawait axios.delete(`/api/users/${id}`, config);\r\n\r\n\t\tdispatch({ type: USER_DELETE_SUCCESS });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_DELETE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update the user details\r\nexport const updateUser = (user) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: USER_UPDATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst isSocial = userInfo.isSocialLogin;\r\n\t\tconst { data } = await axios.put(\r\n\t\t\t`/api/users/${user._id}`,\r\n\t\t\tuser,\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: USER_UPDATE_SUCCESS });\r\n\t\tdispatch({\r\n\t\t\ttype: USER_DETAILS_SUCCESS,\r\n\t\t\tpayload: { ...data, isSocialLogin: isSocial },\r\n\t\t});\r\n\r\n\t\tif (data.id === userInfo.id) {\r\n\t\t\t// // login the user after updating the information\r\n\t\t\tconst newUserInfo = {\r\n\t\t\t\t...userInfo,\r\n\t\t\t\t...userInfo,\r\n\t\t\t\tid: data.id,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\temail: data.email,\r\n\t\t\t\tisAdmin: data.isAdmin,\r\n\t\t\t\tisConfirmed: data.isConfirmed,\r\n\t\t\t};\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\t\tpayload: newUserInfo,\r\n\t\t\t});\r\n\r\n\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(newUserInfo));\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: USER_UPDATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Form, InputGroup } from 'react-bootstrap';\r\n\r\nconst SearchBox = ({ history }) => {\r\n\tconst [keyword, setKeyword] = useState('');\r\n\r\n\t// search for the keyword by redirecting to homepage with param\r\n\tconst handleSearch = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (keyword.trim()) {\r\n\t\t\thistory.push(`/search/${keyword}`);\r\n\t\t} else {\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Form onSubmit={handleSearch} className='d-flex'>\r\n\t\t\t{/* display searchbar inside navbar in large screens only */}\r\n\t\t\t<InputGroup className='mt-2'>\r\n\t\t\t\t<Form.Control\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tborder: '1px solid #2c3e50',\r\n\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tname='keyword'\r\n\t\t\t\t\tclassName='mr-sm-2 ml-sm-4'\r\n\t\t\t\t\tonChange={(e) => setKeyword(e.target.value)}\r\n\t\t\t\t\tplaceholder='Search Products...'\r\n\t\t\t\t\tvalue={keyword}\r\n\t\t\t\t/>\r\n\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: 'white',\r\n\t\t\t\t\t\tborder: '1px solid #2c3e50',\r\n\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\taria-label='search'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: '0',\r\n\t\t\t\t\t\t\tborder: '0',\r\n\t\t\t\t\t\t\toutline: '0',\r\n\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttype='submit'>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tstyle={{ color: '#95a5a6' }}\r\n\t\t\t\t\t\t\tclassName='fas fa-search'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</InputGroup.Text>\r\n\t\t\t</InputGroup>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default SearchBox;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Navbar, Nav, Container, NavDropdown } from 'react-bootstrap';\r\nimport { logoutUser } from '../actions/userActions';\r\nimport { Route } from 'react-router-dom';\r\nimport SearchBox from './SearchBox';\r\nimport '../styles/header.css';\r\n\r\nconst Header = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { userInfo } = userLogin;\r\n\tconst { cartItems } = cart;\r\n\r\n\tconst [show1, setShow1] = useState(false); // to close dropdown when clicking anywhere outside\r\n\tconst [show2, setShow2] = useState(false); // to close dropdown when clicking anywhere outside\r\n\tconst [count, setCount] = useState(0);\r\n\r\n\t// update count when new cart changes\r\n\tuseEffect(() => {\r\n\t\tsetCount(cartItems.reduce((acc, item) => acc + item.qty, 0));\r\n\t}, [cartItems]);\r\n\r\n\t// close the second dropdown when it is open and user clicks anywhere else\r\n\tconst handleDropdown2 = (e) => {\r\n\t\tif (show2) {\r\n\t\t\tsetShow2(false);\r\n\t\t} else {\r\n\t\t\tsetShow2(true);\r\n\t\t\tsetShow1(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// close the first dropdown when it is open and user clicks anywhere else\r\n\tconst handleDropdown1 = (e) => {\r\n\t\tif (show1) {\r\n\t\t\tsetShow1(false);\r\n\t\t} else {\r\n\t\t\tsetShow1(true);\r\n\t\t\tsetShow2(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// dispatch action to logout user\r\n\tconst handleLogout = () => {\r\n\t\tdispatch(logoutUser());\r\n\t\twindow.location.href = '/';\r\n\t};\r\n\r\n\t// render different navbars for large and small screens without navbar toggle\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t{/* this section covers entire screen except the dropdown, to handle onclicks */}\r\n\t\t\t<section\r\n\t\t\t\tclassName='navbar-dropdown-cover'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay:\r\n\t\t\t\t\t\twindow.innerHeight > 430 && (show1 || show2)\r\n\t\t\t\t\t\t\t? 'block'\r\n\t\t\t\t\t\t\t: 'none',\r\n\t\t\t\t\tminWidth: '100%',\r\n\t\t\t\t\theight: '100%',\r\n\t\t\t\t\tzIndex: '100',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShow1(false);\r\n\t\t\t\t\tsetShow2(false);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* conditionally render different navbars for the mobile sreens */}\r\n\t\t\t<Navbar bg='primary' variant='dark' expand='lg'>\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<LinkContainer to='/'>\r\n\t\t\t\t\t\t<Navbar.Brand>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc='/images/kosells.png'\r\n\t\t\t\t\t\t\t\tclassName='nav-logo'\r\n\t\t\t\t\t\t\t\talt='logo'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\tKosells\r\n\t\t\t\t\t\t</Navbar.Brand>\r\n\t\t\t\t\t</LinkContainer>\r\n\r\n\t\t\t\t\t{/* history is available only inside Route, so this is used */}\r\n\t\t\t\t\t{/* display searchbar inside navbar in large screens only */}\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\trender={({ history }) => (\r\n\t\t\t\t\t\t\t<div className='d-none d-md-block'>\r\n\t\t\t\t\t\t\t\t<SearchBox history={history} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Nav\r\n\t\t\t\t\t\tclassName='ms-auto nav-mobile'\r\n\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\tuserInfo\r\n\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-between',\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-evenly',\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t{userInfo && userInfo.isAdmin && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{/* display this only on mobile screens */}\r\n\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\tclassName='d-block d-md-none'\r\n\t\t\t\t\t\t\t\t\tto='/admin/userlist'>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-users' />\r\n\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\tclassName='d-block d-md-none'\r\n\t\t\t\t\t\t\t\t\tto='/admin/orderlist'>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-user-shield' />\r\n\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\tclassName='d-block d-md-none'\r\n\t\t\t\t\t\t\t\t\tto='/admin/productlist'>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-shopping-bag' />\r\n\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<LinkContainer to='/cart'>\r\n\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t{/* indicate cart size */}\r\n\t\t\t\t\t\t\t\t{count ? (\r\n\t\t\t\t\t\t\t\t\t<div className='nav-cart-size'>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\t\t\t\tcount > 10\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? { fontSize: '0.6em' }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: { fontSize: '0.7em' }\r\n\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t{count}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<i className='fas fa-shopping-cart navbar-icons' />{' '}\r\n\t\t\t\t\t\t\t\t{!(userInfo && userInfo.isAdmin) ||\r\n\t\t\t\t\t\t\t\twindow.innerWidth >= 430\r\n\t\t\t\t\t\t\t\t\t? 'Cart'\r\n\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t{userInfo && userInfo.isAdmin && (\r\n\t\t\t\t\t\t\t// show this only on md screens and above\r\n\t\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\t\tclassName='d-none d-md-block'\r\n\t\t\t\t\t\t\t\ttitle='Admin'\r\n\t\t\t\t\t\t\t\tid='adminMenu'\r\n\t\t\t\t\t\t\t\tshow={show2}\r\n\t\t\t\t\t\t\t\tonClick={handleDropdown2}>\r\n\t\t\t\t\t\t\t\t<LinkContainer to='/admin/userlist'>\r\n\t\t\t\t\t\t\t\t\t<NavDropdown.Item>Users</NavDropdown.Item>\r\n\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t<LinkContainer to='/admin/productlist'>\r\n\t\t\t\t\t\t\t\t\t<NavDropdown.Item>\r\n\t\t\t\t\t\t\t\t\t\tProducts\r\n\t\t\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t<LinkContainer to='/admin/orderlist'>\r\n\t\t\t\t\t\t\t\t\t<NavDropdown.Item>Orders</NavDropdown.Item>\r\n\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t</NavDropdown>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{userInfo && (\r\n\t\t\t\t\t\t\t// show this only on mobile screens\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\tclassName='d-block d-md-none'\r\n\t\t\t\t\t\t\t\tonClick={handleLogout}>\r\n\t\t\t\t\t\t\t\t<i className='fas fa-sign-out-alt navbar-icons' />{' '}\r\n\t\t\t\t\t\t\t\t{!(userInfo && userInfo.isAdmin) && 'Logout'}\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{userInfo ? (\r\n\t\t\t\t\t\t\t<div className='nav-avatar-container'>\r\n\t\t\t\t\t\t\t\t{/* show this container only on mobile screens */}\r\n\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\tto='/profile'\r\n\t\t\t\t\t\t\t\t\tclassName='d-block d-md-none'>\r\n\t\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={userInfo.avatar}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='nav-avatar'\r\n\t\t\t\t\t\t\t\t\t\t\talt={userInfo.name}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={userInfo.avatar}\r\n\t\t\t\t\t\t\t\t\tclassName='nav-avatar d-none d-md-block'\r\n\t\t\t\t\t\t\t\t\talt={userInfo.name}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t{/* show this dropdown only on large screens */}\r\n\t\t\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\t\t\tclassName='d-none d-md-block'\r\n\t\t\t\t\t\t\t\t\ttitle={userInfo.name}\r\n\t\t\t\t\t\t\t\t\tid={userInfo.id}\r\n\t\t\t\t\t\t\t\t\tshow={show1}\r\n\t\t\t\t\t\t\t\t\tonClick={handleDropdown1}>\r\n\t\t\t\t\t\t\t\t\t<LinkContainer to='/profile'>\r\n\t\t\t\t\t\t\t\t\t\t<NavDropdown.Item>\r\n\t\t\t\t\t\t\t\t\t\t\tProfile\r\n\t\t\t\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t<NavDropdown.Item onClick={handleLogout}>\r\n\t\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t\t</NavDropdown>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<LinkContainer to='/login' variant='primary'>\r\n\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t<i className='fas fa-user navbar-icons' />{' '}\r\n\t\t\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Container>\r\n\t\t\t</Navbar>\r\n\t\t</header>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { Container } from 'react-bootstrap';\r\nimport '../styles/footer.css';\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<footer className='footer-container'>\r\n\t\t\t\t<div className='footer-icons'>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='https://github.com/Rajatm544'\r\n\t\t\t\t\t\taria-label='github account'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'>\r\n\t\t\t\t\t\t<i className='fab fa-github footer-icon' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='https://www.facebook.com/in/rajat--m'\r\n\t\t\t\t\t\taria-label='facebook account'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'>\r\n\t\t\t\t\t\t<i className='fab fa-facebook-in footer-icon' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='https://twitter.com/Rajat__m'\r\n\t\t\t\t\t\taria-label='twitter account'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'>\r\n\t\t\t\t\t\t<i className='fab fa-twitter footer-icon' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='https://rajatm.netlify.app/'\r\n\t\t\t\t\t\taria-label='developer portfolio'\r\n\t\t\t\t\t\ttarget='_blank'\r\n\t\t\t\t\t\trel='noopener noreferrer'>\r\n\t\t\t\t\t\t<i className='fas fa-globe-asia footer-icon' />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='footer-copyright'>&copy;2021 Kosells</div>\r\n\t\t\t</footer>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Rating = ({ value, text, color }) => {\r\n\treturn (\r\n\t\t// show full/half star icon depending on rating value\r\n\t\t<div className='rating'>\r\n\t\t\t{[1, 2, 3, 4, 5].map((ele, idx) => (\r\n\t\t\t\t<span key={idx}>\r\n\t\t\t\t\t<i\r\n\t\t\t\t\t\tstyle={{ color: color, fontSize: '0.9em' }}\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\tvalue >= ele\r\n\t\t\t\t\t\t\t\t? 'fas fa-star'\r\n\t\t\t\t\t\t\t\t: value >= ele - 0.5\r\n\t\t\t\t\t\t\t\t? 'fas fa-star-half-alt'\r\n\t\t\t\t\t\t\t\t: 'far fa-star'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttitle={`${value} Stars`}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</span>\r\n\t\t\t))}\r\n\t\t\t<span style={{ fontSize: '0.9em' }}>{text && text}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nRating.defaultProps = {\r\n\tcolor: '#f8e825',\r\n};\r\n\r\nRating.propTypes = {\r\n\tvalue: PropTypes.number.isRequired,\r\n\ttext: PropTypes.string,\r\n\tcolor: PropTypes.string,\r\n};\r\n\r\nexport default Rating;\r\n","import React from 'react';\r\nimport Rating from './Rating';\r\nimport { Link } from 'react-router-dom';\r\nimport { Card } from 'react-bootstrap';\r\nimport '../styles/product.css';\r\n\r\nconst Product = ({ product }) => {\r\n\treturn (\r\n\t\t<Card className='mt-3 p-0'>\r\n\t\t\t<Link to={`/product/${product._id}`}>\r\n\t\t\t\t<Card.Img\r\n\t\t\t\t\tloading='lazy'\r\n\t\t\t\t\tclassName='product-image'\r\n\t\t\t\t\tsrc={product.image}\r\n\t\t\t\t\tvariant='top'\r\n\t\t\t\t\talt={product.name}\r\n\t\t\t\t/>\r\n\t\t\t</Link>\r\n\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<Link\r\n\t\t\t\t\tto={`/product/${product._id}`}\r\n\t\t\t\t\tstyle={{ color: 'dimgray', textDecoration: 'none' }}>\r\n\t\t\t\t\t<Card.Title className='product-title' as='p'>\r\n\t\t\t\t\t\t<strong>{product.name}</strong>\r\n\t\t\t\t\t</Card.Title>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t<Card.Text as='div'>\r\n\t\t\t\t\t{product && product.rating && (\r\n\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\tvalue={product.rating}\r\n\t\t\t\t\t\t\ttext={`${product.numReviews} Review${\r\n\t\t\t\t\t\t\t\tproduct.numReviews > 1 ? 's' : ''\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Card.Text>\r\n\r\n\t\t\t\t<Card.Text as='h4'>\r\n\t\t\t\t\t{product.price &&\r\n\t\t\t\t\t\tproduct.price.toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</Card.Text>\r\n\t\t\t</Card.Body>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default Product;\r\n","import React from 'react';\r\nimport { Pagination } from 'react-bootstrap';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\n\r\n// different paginate components for products, and for admin panel view\r\nconst Paginate = ({\r\n\tpages,\r\n\tpage,\r\n\tisAdmin = false,\r\n\tkeyword = '',\r\n\tforOrders = false,\r\n\tforUsers = false,\r\n}) => {\r\n\treturn (\r\n\t\tpages > 1 && (\r\n\t\t\t<Pagination>\r\n\t\t\t\t{[...Array(pages).keys()].map((ele) => (\r\n\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\tkey={ele + 1}\r\n\t\t\t\t\t\tto={\r\n\t\t\t\t\t\t\tisAdmin\r\n\t\t\t\t\t\t\t\t? forOrders\r\n\t\t\t\t\t\t\t\t\t? `/admin/orderlist/${ele + 1}`\r\n\t\t\t\t\t\t\t\t\t: forUsers\r\n\t\t\t\t\t\t\t\t\t? `/admin/userlist/${ele + 1}`\r\n\t\t\t\t\t\t\t\t\t: `/admin/productlist/${ele + 1}`\r\n\t\t\t\t\t\t\t\t: keyword\r\n\t\t\t\t\t\t\t\t? `/search/${keyword}/page/${ele + 1}`\r\n\t\t\t\t\t\t\t\t: `/page/${ele + 1}`\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<Pagination.Item active={ele + 1 === Number(page)}>\r\n\t\t\t\t\t\t\t{ele + 1}\r\n\t\t\t\t\t\t</Pagination.Item>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t))}\r\n\t\t\t</Pagination>\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport default Paginate;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Alert } from 'react-bootstrap';\r\n\r\nconst Message = ({ variant, duration, children, dismissible }) => {\r\n\tconst [visible, setVisible] = useState(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetVisible(true);\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (duration) {\r\n\t\t\tsetTimeout(() => setVisible(false), duration * 1000);\r\n\t\t}\r\n\t}, [duration]);\r\n\r\n\treturn (\r\n\t\t<Alert\r\n\t\t\tonClose={() => setVisible(false)}\r\n\t\t\tdismissible={dismissible}\r\n\t\t\tclassName='alert-custom'\r\n\t\t\tstyle={visible ? { display: 'block' } : { display: 'none' }}\r\n\t\t\tvariant={variant}>\r\n\t\t\t{children}\r\n\t\t</Alert>\r\n\t);\r\n};\r\n\r\nMessage.defaultProps = {\r\n\tvariant: 'info',\r\n\tdismissible: false,\r\n};\r\n\r\nexport default Message;\r\n","export const PRODUCT_LIST_REQUEST = 'PRODUCT_LIST_REQUEST';\r\nexport const PRODUCT_LIST_SUCCESS = 'PRODUCT_LIST_SUCCESS';\r\nexport const PRODUCT_LIST_FAILURE = 'PRODUCT_LIST_FAILURE';\r\n\r\nexport const PRODUCT_DETAILS_REQUEST = 'PRODUCT_DETAILS_REQUEST';\r\nexport const PRODUCT_DETAILS_SUCCESS = 'PRODUCT_DETAILS_SUCCESS';\r\nexport const PRODUCT_DETAILS_FAILURE = 'PRODUCT_DETAILS_FAILURE';\r\n\r\nexport const PRODUCT_DELETE_REQUEST = 'PRODUCT_DELETE_REQUEST';\r\nexport const PRODUCT_DELETE_SUCCESS = 'PRODUCT_DELETE_SUCCESS';\r\nexport const PRODUCT_DELETE_FAILURE = 'PRODUCT_DELETE_FAILURE';\r\n\r\nexport const PRODUCT_CREATE_REQUEST = 'PRODUCT_CREATE_REQUEST';\r\nexport const PRODUCT_CREATE_SUCCESS = 'PRODUCT_CREATE_SUCCESS';\r\nexport const PRODUCT_CREATE_FAILURE = 'PRODUCT_CREATE_FAILURE';\r\nexport const PRODUCT_CREATE_RESET = 'PRODUCT_CREATE_RESET';\r\n\r\nexport const PRODUCT_UPDATE_REQUEST = 'PRODUCT_UPDATE_REQUEST';\r\nexport const PRODUCT_UPDATE_SUCCESS = 'PRODUCT_UPDATE_SUCCESS';\r\nexport const PRODUCT_UPDATE_FAILURE = 'PRODUCT_UPDATE_FAILURE';\r\nexport const PRODUCT_UPDATE_RESET = 'PRODUCT_UPDATE_RESET';\r\n\r\nexport const PRODUCT_CREATE_REVIEW_REQUEST = 'PRODUCT_CREATE_REVIEW_REQUEST';\r\nexport const PRODUCT_CREATE_REVIEW_SUCCESS = 'PRODUCT_CREATE_REVIEW_SUCCESS';\r\nexport const PRODUCT_CREATE_REVIEW_FAILURE = 'PRODUCT_CREATE_REVIEW_FAILURE';\r\nexport const PRODUCT_CREATE_REVIEW_RESET = 'PRODUCT_CREATE_REVIEW_RESET';\r\n\r\nexport const PRODUCT_TOP_RATED_REQUEST = 'PRODUCT_TOP_RATED_REQUEST';\r\nexport const PRODUCT_TOP_RATED_SUCCESS = 'PRODUCT_TOP_RATED_SUCCESS';\r\nexport const PRODUCT_TOP_RATED_FAILURE = 'PRODUCT_TOP_RATED_FAILURE';\r\n","import {\r\n\tPRODUCT_DETAILS_FAILURE,\r\n\tPRODUCT_DETAILS_REQUEST,\r\n\tPRODUCT_DETAILS_SUCCESS,\r\n\tPRODUCT_LIST_FAILURE,\r\n\tPRODUCT_LIST_REQUEST,\r\n\tPRODUCT_LIST_SUCCESS,\r\n\tPRODUCT_DELETE_FAILURE,\r\n\tPRODUCT_DELETE_REQUEST,\r\n\tPRODUCT_DELETE_SUCCESS,\r\n\tPRODUCT_CREATE_REQUEST,\r\n\tPRODUCT_CREATE_SUCCESS,\r\n\tPRODUCT_CREATE_FAILURE,\r\n\tPRODUCT_UPDATE_REQUEST,\r\n\tPRODUCT_UPDATE_SUCCESS,\r\n\tPRODUCT_UPDATE_FAILURE,\r\n\tPRODUCT_CREATE_REVIEW_REQUEST,\r\n\tPRODUCT_CREATE_REVIEW_SUCCESS,\r\n\tPRODUCT_CREATE_REVIEW_FAILURE,\r\n\tPRODUCT_TOP_RATED_REQUEST,\r\n\tPRODUCT_TOP_RATED_SUCCESS,\r\n\tPRODUCT_TOP_RATED_FAILURE,\r\n} from '../constants/productConstants';\r\nimport axios from 'axios';\r\n\r\n// list orders based on keyword and page number when paginated\r\nexport const listProducts =\r\n\t(keyword = '', pageNumber = '', pageSize = '') =>\r\n\tasync (dispatch) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: PRODUCT_LIST_REQUEST });\r\n\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/products?keyword=${keyword}&pageNumber=${pageNumber}&pageSize=${pageSize}`\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: PRODUCT_LIST_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: PRODUCT_LIST_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// fetch details of a particular product\r\nexport const listProductDetails = (id) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_DETAILS_REQUEST });\r\n\r\n\t\tconst { data } = await axios.get(`/api/products/${id}`);\r\n\r\n\t\tdispatch({ type: PRODUCT_DETAILS_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_DETAILS_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// delete a particular product by taking an id\r\nexport const deleteProduct = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_DELETE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.delete(`/api/products/${id}`, config);\r\n\r\n\t\tdata && dispatch({ type: PRODUCT_DELETE_SUCCESS });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_DELETE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// create a product, when the user is an admin\r\nexport const createProduct = () => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_CREATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.post(`/api/products/`, {}, config);\r\n\r\n\t\tdispatch({ type: PRODUCT_CREATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_CREATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update the product details from the admin panel view\r\nexport const updateProduct = (product) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_UPDATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.put(\r\n\t\t\t`/api/products/${product._id}`,\r\n\t\t\tproduct,\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: PRODUCT_UPDATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_UPDATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// create a new product review for particular product\r\nexport const createProductReview =\r\n\t(productID, review) => async (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: PRODUCT_CREATE_REVIEW_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tawait axios.post(\r\n\t\t\t\t`/api/products/${productID}/reviews`,\r\n\t\t\t\treview,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: PRODUCT_CREATE_REVIEW_SUCCESS });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: PRODUCT_CREATE_REVIEW_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// fetch the top rated products for the carousel\r\nexport const getTopRatedProducts = () => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({ type: PRODUCT_TOP_RATED_REQUEST });\r\n\r\n\t\tconst { data } = await axios.get('/api/products/top');\r\n\r\n\t\tdispatch({ type: PRODUCT_TOP_RATED_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_TOP_RATED_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n","import React from 'react';\r\nimport '../styles/skeleton.css';\r\n\r\nconst BasicSkeleton = ({ type }) => {\r\n\tconst classes = `skeleton ${type}`;\r\n\r\n\treturn <div className={classes} />;\r\n};\r\n\r\nexport default BasicSkeleton;\r\n","import React from 'react';\r\n\r\nconst SkeletonShimmer = () => {\r\n\treturn (\r\n\t\t<div className='shimmer-wrapper'>\r\n\t\t\t<div className='shimmer' />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SkeletonShimmer;\r\n","import React from 'react';\r\nimport BasicSkeleton from './BasicSkeleton';\r\nimport SkeletonShimmer from './SkeletonShimmer';\r\n\r\nconst CarouselSkeleton = () => {\r\n\treturn (\r\n\t\t<div style={{ position: 'relative', overflow: 'hidden' }}>\r\n\t\t\t<BasicSkeleton type='box' />\r\n\t\t\t<SkeletonShimmer />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CarouselSkeleton;\r\n","import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Carousel, CarouselItem, Image } from 'react-bootstrap';\r\nimport Message from './Message';\r\nimport { getTopRatedProducts } from '../actions/productActions';\r\nimport '../styles/product-carousel.css';\r\nimport CarouselSkeleton from '../components/CarouselSkeleton';\r\n\r\nconst ProductCarousel = () => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst productTopRated = useSelector((state) => state.productTopRated);\r\n\tconst { error, loading, products } = productTopRated;\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getTopRatedProducts());\r\n\t}, [dispatch]);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <CarouselSkeleton />}\r\n\t\t\t{error && (\r\n\t\t\t\t<Message dismissible variant='danger'>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{/* render carousel only on large screens */}\r\n\t\t\t<Carousel\r\n\t\t\t\tstyle={{ marginTop: '0.5em' }}\r\n\t\t\t\tpause='hover'\r\n\t\t\t\tclassName='bg-primary'\r\n\t\t\t\tindicators={false}\r\n\t\t\t\tinterval={10000}>\r\n\t\t\t\t{products &&\r\n\t\t\t\t\tproducts.map((product) => (\r\n\t\t\t\t\t\t<CarouselItem key={product._id}>\r\n\t\t\t\t\t\t\t<Link to={`/product/${product._id}`}>\r\n\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\tsrc={product.image}\r\n\t\t\t\t\t\t\t\t\talt={product.name}\r\n\t\t\t\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Carousel.Caption className='carousel-caption'>\r\n\t\t\t\t\t\t\t\t\t{product.name} (\r\n\t\t\t\t\t\t\t\t\t{product.price.toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t</Carousel.Caption>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</CarouselItem>\r\n\t\t\t\t\t))}\r\n\t\t\t</Carousel>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProductCarousel;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nconst Meta = ({ title, description, keywords }) => {\r\n\treturn (\r\n\t\t<Helmet>\r\n\t\t\t<title>{title}</title>\r\n\t\t\t<meta name='description' content={description} />\r\n\t\t\t<meta name='keywords' content={keywords} />\r\n\t\t</Helmet>\r\n\t);\r\n};\r\n\r\nMeta.defaultProps = {\r\n\ttitle: 'Welcome to Kosells',\r\n\tkeywords: 'Electronics, Kosells, Ecommerce, Rajat',\r\n\tdescription: 'Buy the best products at the lowest prices',\r\n};\r\nexport default Meta;\r\n","import React from 'react';\r\nimport BasicSkeleton from './BasicSkeleton';\r\nimport SkeletonShimmer from './SkeletonShimmer';\r\n\r\nconst ProductSkeleton = () => {\r\n\treturn (\r\n\t\t<div className='skeleton-product-wrapper'>\r\n\t\t\t<BasicSkeleton type='box' />\r\n\t\t\t<BasicSkeleton type='text' />\r\n\t\t\t<BasicSkeleton type='text' />\r\n\t\t\t<SkeletonShimmer />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ProductSkeleton;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Product from '../components/Product';\r\nimport Paginate from '../components/Paginate';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport ProductCarousel from '../components/ProductCarousel';\r\nimport Meta from '../components/Meta';\r\nimport { listProducts } from '../actions/productActions';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\nimport Message from '../components/Message';\r\nimport SearchBox from '../components/SearchBox';\r\nimport ProductSkeleton from '../components/ProductSkeleton';\r\n\r\nconst HomePage = ({ match, history }) => {\r\n\tconst keyword = match.params.keyword; // to search for products\r\n\tconst pageNumber = Number(match.params.pageNumber) || 1; // current page number in the paginated display\r\n\tconst [promptVerfication, setPromptVerification] = useState(false); // prompt user to verify email if not yet confirmed\r\n\tconst [products, setProducts] = useState(null);\r\n\tconst [productAvailable, setProductAvailable] = useState(false);\r\n\tconst dispatch = useDispatch();\r\n\r\n\t// get the products list, userinfo and user details form the redix store\r\n\tconst productList = useSelector((state) => state.productList);\r\n\tlet { loading, error, pages } = productList;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userInfoError } = userDetails;\r\n\r\n\t// fetch the user details\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// refresh token to get new access token if error in user details\r\n\tuseEffect(() => {\r\n\t\tif (userInfoError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tdispatch(refreshLogin(user?.email));\r\n\t\t}\r\n\t}, [userInfoError, dispatch, userInfo]);\r\n\r\n\t// set a state variable to true or false depending on if products is avialable in the state\r\n\tuseEffect(() => {\r\n\t\tif (products) {\r\n\t\t\tproducts.length\r\n\t\t\t\t? setProductAvailable(true)\r\n\t\t\t\t: setProductAvailable(false);\r\n\t\t}\r\n\t}, [products]);\r\n\r\n\t// fetch products from redux store into local state\r\n\tuseEffect(() => {\r\n\t\tif (productList) {\r\n\t\t\tif (productList.products) setProducts([...productList.products]);\r\n\t\t}\r\n\t}, [productList]);\r\n\r\n\t// list products based on keyword and pagenumber\r\n\tuseEffect(() => {\r\n\t\tdispatch(listProducts(keyword, pageNumber));\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [dispatch, keyword, pageNumber]);\r\n\r\n\t// check if user needs to be promted about email verification on page load\r\n\tuseEffect(() => {\r\n\t\tsetPromptVerification(\r\n\t\t\tlocalStorage.getItem('promptEmailVerfication') === 'true'\r\n\t\t\t\t? true\r\n\t\t\t\t: false\r\n\t\t);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Meta />\r\n\t\t\t{/* display carousel only on larger screens */}\r\n\t\t\t{!keyword ? (\r\n\t\t\t\twindow.innerWidth > 430 && <ProductCarousel />\r\n\t\t\t) : (\r\n\t\t\t\t<Link\r\n\t\t\t\t\tclassName='btn btn-outline btn-outline-primary my-2'\r\n\t\t\t\t\tto='/'>\r\n\t\t\t\t\tGo Back\r\n\t\t\t\t</Link>\r\n\t\t\t)}\r\n\t\t\t{/* display this search bar on home page on mobile screens */}\r\n\t\t\t<div className='d-block d-md-none'>\r\n\t\t\t\t<SearchBox history={history} />\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* if the user needs to be prompted about email verification, show this message */}\r\n\t\t\t{promptVerfication ? (\r\n\t\t\t\t<Message dismissible variant='info' duration={10}>\r\n\t\t\t\t\tAccount Created! Please check your email to verify your\r\n\t\t\t\t\taccount and start shopping.\r\n\t\t\t\t</Message>\r\n\t\t\t) : null}\r\n\r\n\t\t\t{error ? (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t) : !loading && products ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t{products.length\r\n\t\t\t\t\t\t\t? products.map((product) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\t\tsm={12}\r\n\t\t\t\t\t\t\t\t\t\t\tmd={6}\r\n\t\t\t\t\t\t\t\t\t\t\tlg={4}\r\n\t\t\t\t\t\t\t\t\t\t\txl={3}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={product._id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Product product={product} />\r\n\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t: keyword &&\r\n\t\t\t\t\t\t\t  !productAvailable && (\r\n\t\t\t\t\t\t\t\t\t//   show this only if user has searched for some item and it is not available\r\n\t\t\t\t\t\t\t\t\t<Col className='text-center'>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-frown' /> No\r\n\t\t\t\t\t\t\t\t\t\t\titems found for this search query\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\tGo Back to the{' '}\r\n\t\t\t\t\t\t\t\t\t\t<Link to='/'>Home Page</Link>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t  )}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Paginate\r\n\t\t\t\t\t\tclassName='mt-auto text-center'\r\n\t\t\t\t\t\tpage={pageNumber}\r\n\t\t\t\t\t\tkeyword={keyword ? keyword : ''}\r\n\t\t\t\t\t\tpages={pages}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\tloading &&\r\n\t\t\t\tproducts &&\r\n\t\t\t\tproducts.length === 0 && (\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t{[1, 2, 3, 4].map((ele) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Col sm={12} md={6} lg={4} xl={3} key={ele}>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<ProductSkeleton />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useState } from 'react';\r\nimport { Image } from 'react-bootstrap';\r\n\r\nconst ImageMagnifier = ({\r\n\tsrc,\r\n\talt,\r\n\ttitle,\r\n\twidth,\r\n\theight,\r\n\tmagnifierHeight = 200,\r\n\tmagnifieWidth = 200,\r\n\tzoomLevel = 1.5,\r\n}) => {\r\n\tconst [[x, y], setXY] = useState([0, 0]);\r\n\tconst [[imgWidth, imgHeight], setSize] = useState([0, 0]);\r\n\tconst [showMagnifier, setShowMagnifier] = useState(false);\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tposition: 'relative',\r\n\t\t\t\theight: height,\r\n\t\t\t\twidth: width,\r\n\t\t\t}}>\r\n\t\t\t<Image\r\n\t\t\t\tclassName='product-image'\r\n\t\t\t\tsrc={src}\r\n\t\t\t\tstyle={{ height: height, width: width }}\r\n\t\t\t\tfluid\r\n\t\t\t\ttitle={title}\r\n\t\t\t\tonMouseEnter={(e) => {\r\n\t\t\t\t\t// update image size and turn-on magnifier\r\n\t\t\t\t\tconst elem = e.currentTarget;\r\n\t\t\t\t\tconst { width, height } = elem.getBoundingClientRect();\r\n\t\t\t\t\tsetSize([width, height]);\r\n\t\t\t\t\tsetShowMagnifier(true);\r\n\t\t\t\t}}\r\n\t\t\t\tonMouseMove={(e) => {\r\n\t\t\t\t\t// update cursor position\r\n\t\t\t\t\tconst elem = e.currentTarget;\r\n\t\t\t\t\tconst { top, left } = elem.getBoundingClientRect();\r\n\r\n\t\t\t\t\t// calculate cursor position on the image\r\n\t\t\t\t\tconst x = e.pageX - left - window.pageXOffset;\r\n\t\t\t\t\tconst y = e.pageY - top - window.pageYOffset;\r\n\t\t\t\t\tsetXY([x, y]);\r\n\t\t\t\t}}\r\n\t\t\t\tonMouseLeave={() => {\r\n\t\t\t\t\t// close magnifier\r\n\t\t\t\t\tsetShowMagnifier(false);\r\n\t\t\t\t}}\r\n\t\t\t\talt={alt}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: showMagnifier ? '' : 'none',\r\n\t\t\t\t\t// display: window.innerWidth <= 468 ? 'none' : '',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t// prevent maginier blocks the mousemove event of img\r\n\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\theight: `${magnifierHeight}px`,\r\n\t\t\t\t\twidth: `${magnifieWidth}px`,\r\n\t\t\t\t\t// move element center to cursor pos\r\n\t\t\t\t\ttop: `${y - magnifierHeight / 2.5}px`,\r\n\t\t\t\t\tleft: `${x - magnifieWidth / 2.5}px`,\r\n\t\t\t\t\topacity: '1', // reduce opacity so you can verify position\r\n\t\t\t\t\tborder: '1px solid lightgray',\r\n\t\t\t\t\tbackgroundColor: 'white',\r\n\t\t\t\t\tbackgroundImage: `url('${src}')`,\r\n\t\t\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\t\t\tborderRadius: '50%',\r\n\r\n\t\t\t\t\t//calculate zoomed image size\r\n\t\t\t\t\tbackgroundSize: `${imgWidth * zoomLevel}px ${\r\n\t\t\t\t\t\timgHeight * zoomLevel\r\n\t\t\t\t\t}px`,\r\n\r\n\t\t\t\t\t//calculete position of zoomed image.\r\n\t\t\t\t\tbackgroundPositionX: `${\r\n\t\t\t\t\t\t-x * zoomLevel + magnifieWidth / 2\r\n\t\t\t\t\t}px`,\r\n\t\t\t\t\tbackgroundPositionY: `${\r\n\t\t\t\t\t\t-y * zoomLevel + magnifierHeight / 2\r\n\t\t\t\t\t}px`,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ImageMagnifier;\r\n","import React from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\nimport '../styles/loader.css';\r\n\r\nconst Loader = () => {\r\n\treturn (\r\n\t\t<Spinner\r\n\t\t\tanimation='border'\r\n\t\t\trole='status'\r\n\t\t\tvariant='primary'\r\n\t\t\tclassName='loader'\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default Loader;\r\n","import {\r\n\tORDER_CREATE_REQUEST,\r\n\tORDER_CREATE_SUCCESS,\r\n\tORDER_CREATE_FAILURE,\r\n\tORDER_DETAILS_REQUEST,\r\n\tORDER_DETAILS_SUCCESS,\r\n\tORDER_DETAILS_FAILURE,\r\n\tORDER_PAY_REQUEST,\r\n\tORDER_PAY_SUCCESS,\r\n\tORDER_PAY_FAILURE,\r\n\tORDER_DELIVER_REQUEST,\r\n\tORDER_DELIVER_SUCCESS,\r\n\tORDER_DELIVER_FAILURE,\r\n\tORDER_USER_LIST_REQUEST,\r\n\tORDER_USER_LIST_SUCCESS,\r\n\tORDER_USER_LIST_FAILURE,\r\n\tORDER_ALL_LIST_REQUEST,\r\n\tORDER_ALL_LIST_SUCCESS,\r\n\tORDER_ALL_LIST_FAILURE,\r\n} from '../constants/orderConstants';\r\n\r\nimport axios from 'axios';\r\n\r\n// get all the details about the order and dispatch only of currently logged in\r\nexport const createOrder = (order) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_CREATE_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.post('/api/orders/', order, config);\r\n\r\n\t\tdispatch({ type: ORDER_CREATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_CREATE_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// get details about a particular order\r\nexport const getOrderDetails = (orderID) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_DETAILS_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.get(`/api/orders/${orderID}`, config);\r\n\r\n\t\tdispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_DETAILS_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// update the current order to that of a paid one, and store the correct payment result\r\nexport const payOrder =\r\n\t(orderID, paymentResult) => async (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: ORDER_PAY_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tconst { data } = await axios.put(\r\n\t\t\t\t`/api/orders/${orderID}/pay`,\r\n\t\t\t\tpaymentResult,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: ORDER_PAY_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ORDER_PAY_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n// Set the current order as delivered, only when logged in user is an admin\r\nexport const deliverOrder = (orderID) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_DELIVER_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.put(\r\n\t\t\t`/api/orders/${orderID}/deliver`,\r\n\t\t\t{},\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: ORDER_DELIVER_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_DELIVER_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// list all the orders of a particular user\r\nexport const listMyOrders = () => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({ type: ORDER_USER_LIST_REQUEST });\r\n\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t? {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t},\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t},\r\n\t\t\t  };\r\n\r\n\t\tconst { data } = await axios.get(`/api/orders/myorders`, config);\r\n\r\n\t\tdispatch({ type: ORDER_USER_LIST_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({\r\n\t\t\ttype: ORDER_USER_LIST_FAILURE,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// list all orders for the admin panel view, include the pagenumber being fetched\r\nexport const listAllOrders =\r\n\t(pageNumber = '') =>\r\n\tasync (dispatch, getState) => {\r\n\t\ttry {\r\n\t\t\tdispatch({ type: ORDER_ALL_LIST_REQUEST });\r\n\r\n\t\t\tconst {\r\n\t\t\t\tuserLogin: { userInfo },\r\n\t\t\t} = getState();\r\n\r\n\t\t\t// different headers are used when it is a social login, and when it is a std email login\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\r\n\t\t\tconst { data } = await axios.get(\r\n\t\t\t\t`/api/orders?pageNumber=${pageNumber}`,\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\r\n\t\t\tdispatch({ type: ORDER_ALL_LIST_SUCCESS, payload: data });\r\n\t\t} catch (error) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: ORDER_ALL_LIST_FAILURE,\r\n\t\t\t\tpayload:\r\n\t\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t\t? error.response.data.message\r\n\t\t\t\t\t\t: error.message,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n","// there is a need to convert mongodb dates to readable date formats in various pages\r\n// this util function does that, and has a second argument to decide whether the time has to be included\r\nconst getDateString = (date, showTime = true) => {\r\n\tconst options = {\r\n\t\tyear: 'numeric',\r\n\t\tmonth: 'short',\r\n\t\tday: 'numeric',\r\n\t};\r\n\tconst timeStr = new Date(date).toLocaleTimeString('en', {\r\n\t\ttimeStyle: 'short',\r\n\t\thour12: true,\r\n\t\ttimeZone: 'IST',\r\n\t});\r\n\r\n\tlet result = '';\r\n\tif (showTime) result += `${timeStr} `;\r\n\treturn result + new Date(date).toLocaleDateString('en', options);\r\n};\r\n\r\nexport default getDateString;\r\n","/* eslint-disable array-callback-return */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n\tRow,\r\n\tCol,\r\n\tCard,\r\n\tButton,\r\n\tListGroup,\r\n\tForm,\r\n\tFloatingLabel,\r\n} from 'react-bootstrap';\r\nimport ImageMagnifier from '../components/ImageMagnifier'; // to magnify image on hover\r\nimport Rating from '../components/Rating';\r\nimport Meta from '../components/Meta';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport {\r\n\tlistProductDetails,\r\n\tcreateProductReview,\r\n} from '../actions/productActions';\r\nimport { listMyOrders } from '../actions/orderActions';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\nimport { PRODUCT_CREATE_REVIEW_RESET } from '../constants/productConstants';\r\nimport getDateString from '../utils/getDateString';\r\nimport '../styles/product-page.css';\r\n\r\nconst ProductPage = ({ history, match }) => {\r\n\tconst [quantity, setQuantity] = useState(1);\r\n\tconst [rating, setRating] = useState(0);\r\n\tconst [review, setReview] = useState('');\r\n\tconst [allReviews, setAllReviews] = useState([]);\r\n\tconst [hasOrderedItem, setHasOrderedItem] = useState(false); // bool to check if the user has ordered this product\r\n\tconst [showReviewForm, setShowReviewForm] = useState(false); // bool to decide whether to show the review form or not\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst productDetails = useSelector((state) => state.productDetails);\r\n\tconst { product, error } = productDetails;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\tconst productCreateReview = useSelector(\r\n\t\t(state) => state.productCreateReview\r\n\t);\r\n\tconst {\r\n\t\tloading: loadingCreateReview,\r\n\t\tsuccess: successCreateReview,\r\n\t\terror: errorCreateReview,\r\n\t} = productCreateReview;\r\n\r\n\tconst orderListUser = useSelector((state) => state.orderListUser);\r\n\tconst { orders } = orderListUser;\r\n\r\n\t// fetch user login info\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// refresh the access tokens for accessing user details\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(listMyOrders());\r\n\t}, [dispatch]);\r\n\r\n\t// add a new review, and reset the stored product review in the redux store\r\n\tuseEffect(() => {\r\n\t\tif (successCreateReview) {\r\n\t\t\twindow.alert('Review Submitted!!');\r\n\t\t\tsetRating(0);\r\n\t\t\tsetReview('');\r\n\t\t\tdispatch({ type: PRODUCT_CREATE_REVIEW_RESET });\r\n\t\t}\r\n\t\tdispatch(listProductDetails(match.params.id));\r\n\t}, [match, dispatch, successCreateReview]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (product && product.reviews && userInfo) {\r\n\t\t\tlet flag = 0; // to check if this user has already reviewed this product\r\n\t\t\tfor (let review of product.reviews) {\r\n\t\t\t\tif (review.user === userInfo.id) {\r\n\t\t\t\t\tflag = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tflag ? setShowReviewForm(false) : setShowReviewForm(true);\r\n\t\t} else {\r\n\t\t\tsetShowReviewForm(true);\r\n\t\t}\r\n\t}, [product, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (orders && orders.length) {\r\n\t\t\tlet flag = 0; // to check is this user has ordered this item\r\n\t\t\tfor (let obj of orders) {\r\n\t\t\t\tfor (let ele of obj.orderItems) {\r\n\t\t\t\t\tif (ele.product.toString() === match.params.id) {\r\n\t\t\t\t\t\tflag = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tflag ? setHasOrderedItem(true) : setHasOrderedItem(false);\r\n\t\t} else {\r\n\t\t\tsetHasOrderedItem(false);\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [orders]);\r\n\r\n\t// arrange all reviews in reverse chronological order\r\n\tuseEffect(() => {\r\n\t\tif (product && product.reviews) {\r\n\t\t\tconst sortedArr = product.reviews.sort(\r\n\t\t\t\t(a, b) => new Date(b.createdAt) - new Date(a.createdAt)\r\n\t\t\t);\r\n\t\t\tsetAllReviews(sortedArr);\r\n\t\t}\r\n\t}, [product]);\r\n\r\n\tconst handleAddToCart = (e) => {\r\n\t\thistory.push(`/cart/${match.params.id}?qty=${quantity}`);\r\n\t};\r\n\r\n\tconst handleReviewSubmit = (e) => {\r\n\t\tdispatch(\r\n\t\t\tcreateProductReview(match.params.id, {\r\n\t\t\t\trating,\r\n\t\t\t\treview,\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Link className='btn btn-outline-primary my-2' to='/'>\r\n\t\t\t\tGo Back\r\n\t\t\t</Link>\r\n\t\t\t{product && (!product._id || product._id !== match.params.id) ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : error ? (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t) : product ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Meta title={`${product.name}`} />\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col md={6}>\r\n\t\t\t\t\t\t\t<ImageMagnifier\r\n\t\t\t\t\t\t\t\tsrc={product.image}\r\n\t\t\t\t\t\t\t\talt={product.name}\r\n\t\t\t\t\t\t\t\ttitle={product.name}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col md={3}>\r\n\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<h3>{product.name}</h3>\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t{product && product.rating && (\r\n\t\t\t\t\t\t\t\t\t\t<Rating\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={product.rating}\r\n\t\t\t\t\t\t\t\t\t\t\ttext={`${\r\n\t\t\t\t\t\t\t\t\t\t\t\tproduct.numReviews\r\n\t\t\t\t\t\t\t\t\t\t\t} Review${\r\n\t\t\t\t\t\t\t\t\t\t\t\tproduct.numReviews > 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 's'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<strong>Price: </strong>\r\n\t\t\t\t\t\t\t\t\t{product.price &&\r\n\t\t\t\t\t\t\t\t\t\tproduct.price.toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<strong>Description:</strong>{' '}\r\n\t\t\t\t\t\t\t\t\t{product.description}\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col md={3}>\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Price: </strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{product.price &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tproduct.price.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Status: </strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{product.countInStock > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'In Stock'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'Out of Stock'}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t{product.countInStock > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>Qty:</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tas='select'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={quantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetQuantity(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* create as many options as the countInStock */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...Array(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproduct.countInStock\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).keys(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].map((ele) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={ele + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={ele + 1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ele + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleAddToCart}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-block btn-lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tproduct.countInStock <= 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tAdd To Cart\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col md={6}>\r\n\t\t\t\t\t\t\t<h2 className='mt-3'>Reviews</h2>\r\n\t\t\t\t\t\t\t{(!product.reviews || !product.reviews.length) && (\r\n\t\t\t\t\t\t\t\t<Message variant='secondary'>\r\n\t\t\t\t\t\t\t\t\tNo Reviews Yet\r\n\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t{/* {console.log(\r\n\t\t\t\t\t\t\t\t\tproduct.reviews.\r\n\t\t\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t\t\t\t{allReviews.map((item) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<ListGroup.Item key={item._id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item.avatar}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={item.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='review-avatar'\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>{item.name}</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<Rating value={item.rating} />\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1.1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.review}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<small\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '0.9em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{getDateString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.createdAt,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t{hasOrderedItem && !showReviewForm && (\r\n\t\t\t\t\t\t\t\t\t<Message dismissible>\r\n\t\t\t\t\t\t\t\t\t\tYou have already reviewed this product\r\n\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{hasOrderedItem && showReviewForm && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<h2>Write a Customer Review</h2>\r\n\t\t\t\t\t\t\t\t\t\t{errorCreateReview && (\r\n\t\t\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='info'\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{errorCreateReview}\r\n\t\t\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{loadingCreateReview && <Loader />}\r\n\t\t\t\t\t\t\t\t\t\t<Form onSubmit={handleReviewSubmit}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group controlId='rating'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tas='select'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={rating}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetRating(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option default>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tChoose Rating\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t1 - Bad\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='2'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t2 - Poor\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t3 - Fair\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='4'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t4 - Good\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='5'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t5 - Excellent\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Group controlId='comment'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='commenttext'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel='Comment'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='my-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tas='textarea'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Leave a comment here'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trow='3'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetReview(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={review}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='d-grid'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button type='submit'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tSubmit Review\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t''\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProductPage;\r\n","export const CART_ADD_ITEM = 'CART_ADD_ITEM';\r\nexport const CART_REMOVE_ITEM = 'CART_REMOVE_ITEM';\r\nexport const CART_RESET = 'CART_RESET';\r\nexport const CART_SAVE_SHIPPING_ADDRESS = 'CART_SAVE_SHIPPING_ADDRESS';\r\nexport const CART_SAVE_PAYMENT_METHOD = 'CART_SAVE_PAYMENT_METHOD';\r\n","import axios from 'axios';\r\nimport {\r\n\tCART_ADD_ITEM,\r\n\tCART_REMOVE_ITEM,\r\n\tCART_SAVE_SHIPPING_ADDRESS,\r\n\tCART_SAVE_PAYMENT_METHOD,\r\n} from '../constants/cartConstants';\r\n\r\n// get the product id and the quantity of the item to add to the cart\r\nexport const addItem = (id, qty) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tconst { data } = await axios.get(`/api/products/${id}`);\r\n\t\tdispatch({\r\n\t\t\ttype: CART_ADD_ITEM,\r\n\t\t\tpayload: {\r\n\t\t\t\tproduct: data._id,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\timage: data.image,\r\n\t\t\t\tprice: data.price,\r\n\t\t\t\tcountInStock: data.countInStock,\r\n\t\t\t\tqty,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t// update the local storage with the new cart\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'cartItems',\r\n\t\t\tJSON.stringify(getState().cart.cartItems)\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t}\r\n};\r\n\r\n// get the product id to be removed from the cart\r\nexport const removeItem = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_REMOVE_ITEM,\r\n\t\t\tpayload: id,\r\n\t\t});\r\n\t\t// update the local storage with the updated cart\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'cartItems',\r\n\t\t\tJSON.stringify(getState().cart.cartItems)\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\n// get the shipping address data and dispatch corresponding action\r\nexport const saveShippingAddress = (data) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_SAVE_SHIPPING_ADDRESS,\r\n\t\t\tpayload: data,\r\n\t\t});\r\n\t\tlocalStorage.setItem('shippingAddress', JSON.stringify(data));\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\n// get the option for payment and update the local storage as well\r\nexport const savePaymentMethod = (data) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_SAVE_PAYMENT_METHOD,\r\n\t\t\tpayload: data,\r\n\t\t});\r\n\t\tlocalStorage.setItem('paymentMethod', JSON.stringify(data));\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n\tRow,\r\n\tCol,\r\n\tImage,\r\n\tButtonGroup,\r\n\tListGroup,\r\n\tButton,\r\n\tCard,\r\n} from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Meta from '../components/Meta';\r\nimport Message from '../components/Message';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\nimport { addItem, removeItem } from '../actions/cartActions';\r\n\r\nconst CartPage = ({ match, location, history }) => {\r\n\tconst [totalItems, setTotalItems] = useState(0);\r\n\tconst productID = match.params.id;\r\n\tconst qty = location.search ? Number(location.search.split('=')[1]) : 1; // fetch from the query string\r\n\tconst dispatch = useDispatch();\r\n\r\n\t// get cart, userInfo and userdetails from redux store\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { cartItems } = cart;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error } = userDetails;\r\n\r\n\t// get user details depending on what type of login it is, dispatch with corresponding argument\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// store total items to local state\r\n\tuseEffect(() => {\r\n\t\tif (cartItems) {\r\n\t\t\tsetTotalItems(cartItems.reduce((acc, item) => acc + item.qty, 0));\r\n\t\t}\r\n\t}, [cartItems]);\r\n\r\n\t// if userdetails shows error, then use refresh token to get new access tokens\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\t// add item to cart\r\n\tuseEffect(() => {\r\n\t\tif (productID) {\r\n\t\t\tdispatch(addItem(productID, qty));\r\n\t\t}\r\n\t}, [dispatch, productID, qty]);\r\n\r\n\t// remove item from cart\r\n\tconst handleRemoveFromCart = (id) => {\r\n\t\tdispatch(removeItem(id));\r\n\t};\r\n\r\n\t// proceed to shipping address page, which is the next step in placing an order\r\n\tconst handleCheckout = (e) => {\r\n\t\thistory.push('/login?redirect=shipping');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Meta title='My Cart | Kosells' />\r\n\t\t\t<Col md={8}>\r\n\t\t\t\t<h1>Shopping Cart.</h1>\r\n\t\t\t\t{!cartItems.length ? (\r\n\t\t\t\t\t<Message>\r\n\t\t\t\t\t\tYour Cart is empty. <Link to='/'>Go Back.</Link>{' '}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t{cartItems.map((item) => (\r\n\t\t\t\t\t\t\t<ListGroup.Item key={item.product}>\r\n\t\t\t\t\t\t\t\t<Row\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='product-image'\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={item.image}\r\n\t\t\t\t\t\t\t\t\t\t\talt={item.name}\r\n\t\t\t\t\t\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\t\t\t\t\t\trounded\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={4}>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/product/${item.product}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tmd={3}\r\n\t\t\t\t\t\t\t\t\t\tclassName='d-none d-md-flex'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-evenly',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t{item.price.toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: '0.7em' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t/>{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.qty}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t{/* display this col only for larger screens */}\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tmd={3}\r\n\t\t\t\t\t\t\t\t\t\tclassName='d-none d-md-flex'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-between',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup aria-label='Addtocart'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'1px solid white',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.qty >=\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.countInStock\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(item.qty + 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='primary'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-plus' />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'1px solid white',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='primary'\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={item.qty === 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(item.qty - 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-minus' />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\thandleRemoveFromCart(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.product\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash' />\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t{/* display this col only on mobile screens */}\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tclassName='d-flex d-md-none mt-2'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-between',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='d-flex'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1.2em',\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '50%',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{item.price.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='ms-1'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '0.7em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.qty}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='d-flex'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-between',\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '50%',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleRemoveFromCart(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash' />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'1px solid white',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.qty >=\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.countInStock\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(item.qty + 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='primary'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-plus' />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toutline: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'1px solid white',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='primary'\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={item.qty === 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(item.qty - 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-minus' />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ListGroup>\r\n\t\t\t\t)}\r\n\t\t\t</Col>\r\n\t\t\t<Col md={4} className='mt-3'>\r\n\t\t\t\t<ListGroup>\r\n\t\t\t\t\t<Card variant='flush'>\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<h2 className='text-center'>\r\n\t\t\t\t\t\t\t\tSubtotal ({totalItems}) Item\r\n\t\t\t\t\t\t\t\t{totalItems > 1 && 's'}\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<strong>\r\n\t\t\t\t\t\t\t\t{cartItems\r\n\t\t\t\t\t\t\t\t\t.reduce(\r\n\t\t\t\t\t\t\t\t\t\t(acc, item) =>\r\n\t\t\t\t\t\t\t\t\t\t\tacc + item.qty * item.price,\r\n\t\t\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t.toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</strong>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<div className='d-grid'>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\tdisabled={!cartItems.length}\r\n\t\t\t\t\t\t\t\t\tonClick={handleCheckout}>\r\n\t\t\t\t\t\t\t\t\tProceed to checkout\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</ListGroup>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n};\r\n\r\nexport default CartPage;\r\n","import React from 'react';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\n\r\nconst FormContainer = ({ children }) => {\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Row className='justify-content-md-center'>\r\n\t\t\t\t<Col xs={12} md={6}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default FormContainer;\r\n","export default __webpack_public_path__ + \"static/media/googleLogo.0590aaf0.png\";","export default __webpack_public_path__ + \"static/media/twitterLogo.f963dcac.png\";","import React from 'react';\r\nimport { Card, Image } from 'react-bootstrap';\r\nimport googleLogo from '../assets/googleLogo.png';\r\nimport githubLogo from '../assets/githubLogo.png';\r\nimport twitterLogo from '../assets/twitterLogo.png';\r\nimport facebookLogo from '../assets/facebookLogo.png';\r\nimport '../styles/social-login-option.css';\r\n\r\nconst SocialLoginOptions = () => {\r\n\tconst baseURL = process.env.REACT_APP_BASE_URL;\r\n\t// display a list of 4 options and make API request to passport login on click\r\n\treturn (\r\n\t\t<div\r\n\t\t\tid='social-login'\r\n\t\t\tstyle={{\r\n\t\t\t\tmargin: '1em 0',\r\n\t\t\t\tpadding: '0',\r\n\t\t\t}}>\r\n\t\t\t<div className='social-login-container'>\r\n\t\t\t\t<div className='social-login-line' />\r\n\t\t\t\t<p className='social-login-content'>Or Connect With</p>\r\n\t\t\t\t<div className='social-login-line' />\r\n\t\t\t</div>\r\n\t\t\t<Card.Body\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmargin: '0',\r\n\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\tfleFlow: 'row wrap',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\tjustifyContent: 'space-around',\r\n\t\t\t\t}}>\r\n\t\t\t\t<a href={`${baseURL}api/auth/google`}>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\trounded\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: '2.5em',\r\n\t\t\t\t\t\t\theight: '2.5em',\r\n\t\t\t\t\t\t\tobjectFit: 'cover',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsrc={}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href={`${baseURL}api/auth/github`}>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\trounded\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: '2.5em',\r\n\t\t\t\t\t\t\theight: '2.5em',\r\n\t\t\t\t\t\t\tobjectFit: 'cover',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsrc={githubLogo}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href={`${baseURL}api/auth/twitter`}>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\trounded\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: '2.5em',\r\n\t\t\t\t\t\t\theight: '2.5em',\r\n\t\t\t\t\t\t\tobjectFit: 'contain',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsrc={twitterLogo}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t\t<a href={`${baseURL}api/auth/facebook`}>\r\n\t\t\t\t\t<Image\r\n\t\t\t\t\t\trounded\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: '2.5em',\r\n\t\t\t\t\t\t\theight: '2.5em',\r\n\t\t\t\t\t\t\tobjectFit: 'contain',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsrc={facebookLogo}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</a>\r\n\t\t\t</Card.Body>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SocialLoginOptions;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEzMjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyQTQxNEFCQzk5QTExMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTMwOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTMxOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R7ClIwAADR5JREFUeNrsnQuw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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAABKNAAASjQEphQ1dAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAvFQTFRF////AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3AHe3dPNe8AAAAPp0Uk5TAAECAwQFBgcICQoLDA0ODxAREhMU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\"","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tForm,\r\n\tButton,\r\n\tInputGroup,\r\n\tCol,\r\n\tCard,\r\n\tFloatingLabel,\r\n} from 'react-bootstrap';\r\nimport { loginUser } from '../actions/userActions';\r\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\r\nimport axios from 'axios';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport SocialLoginOptions from '../components/SocialLoginOptions';\r\nimport '../styles/login-register.css';\r\n\r\nconst LoginPage = ({ location, history }) => {\r\n\tconst [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\r\n\tconst [showRedirectMsg, setShowRedirectMsg] = useState(false);\r\n\tconst [forgotPassword, setForgotPassword] = useState(false);\r\n\tconst [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\r\n\tconst [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\r\n\r\n\tconst [type, setType] = useState('password');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\tconst redirect = location.search ? location.search.split('=')[1] : '';\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { loading, userInfo, error } = userLogin;\r\n\tconst storedInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!location.search.includes('success') && userInfo)\r\n\t\t\thistory.push(redirect);\r\n\t}, [history, redirect, location, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (location.search.includes('login=failed')) {\r\n\t\t\tconst errorCodeQuery = location.search.split('&')[1];\r\n\t\t\tconst errorCode = errorCodeQuery.split('=')[1];\r\n\t\t\tswitch (errorCode) {\r\n\t\t\t\tcase '0':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Google Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '1':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Github Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '2':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Twitter Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '3':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a LinkedIn Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [location.search]);\r\n\r\n\t// if redirected to login page after refresh token expired, show a message\r\n\tuseEffect(() => {\r\n\t\tconst flag = localStorage.getItem('redirectLogin');\r\n\t\tif (flag && flag === 'true') {\r\n\t\t\tsetShowRedirectMsg(true);\r\n\t\t} else {\r\n\t\t\tsetShowRedirectMsg(false);\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// if the passport social login is successful, get the user's data and store in redux store\r\n\tuseEffect(() => {\r\n\t\t// check for url params\r\n\t\tif (window.location.search.includes('success')) {\r\n\t\t\tconst queries = window.location.search.split('&');\r\n\t\t\tconst isSuccess = queries[0].split('=')[1] === 'success';\r\n\t\t\tconst id = queries[1].split('=')[1];\r\n\r\n\t\t\t// if successful login\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t// get user data and dispatch login success\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('/api/users/passport/data', {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t} = data;\r\n\t\t\t\t\t\tconst userData = {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t\tisSocialLogin: true,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// login user in frontend\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\t\t\t\t\tpayload: userData,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// update the local storage\r\n\t\t\t\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\t\t\t'userInfo',\r\n\t\t\t\t\t\t\tJSON.stringify(userData)\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// remove variable that was meant to promt email verification if it is a social login\r\n\t\t\t\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t\t\t\t\thistory.push('/shipping'); // move to shipping page by default\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}, [dispatch, history, redirect]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// if redirected from confirmation page, fill email and let user fill the password field\r\n\t\tif (\r\n\t\t\tstoredInfo &&\r\n\t\t\tstoredInfo.email &&\r\n\t\t\tlocalStorage.getItem('fillEmailOnLoginPage') === 'true'\r\n\t\t) {\r\n\t\t\tlocalStorage.removeItem('fillEmailOnLoginPage');\r\n\t\t\tsetEmail(storedInfo.email);\r\n\t\t}\r\n\t}, [storedInfo]);\r\n\r\n\t// to show/hide the password field content\r\n\tconst showHide = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetType(type === 'password' ? 'text' : 'password');\r\n\t};\r\n\r\n\t// login user from email and password\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(loginUser(email, password));\r\n\t};\r\n\r\n\t// to send a mail for resetting password if forgotted\r\n\tconst handleEmailSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetShowLoading(true);\r\n\r\n\t\t// send the mail to the registered user\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/reset',\r\n\t\t\t{ email },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tsetShowLoading(false);\r\n\t\t\tsetEmailSent(true);\r\n\t\t\t// store the name in localstorage\r\n\t\t\tlocalStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\r\n\t\t}\r\n\t};\r\n\r\n\t// there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\r\n\tif (!forgotPassword) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t{/* if passport login has failed because user logged in with differrent social account, shoe the error msg */}\r\n\t\t\t\t\t{authFailedMsg && (\r\n\t\t\t\t\t\t<Message variant='danger' dismissible>\r\n\t\t\t\t\t\t\t{authFailedMsg}\r\n\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h1 onClick={() => history.push('/register')}>\r\n\t\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{/* the message when refresh token has expired */}\r\n\t\t\t\t\t\t{showRedirectMsg && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='info' duration={10}>\r\n\t\t\t\t\t\t\t\tYour session has expired. Please login again.\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={showHide}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{type === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(true)\r\n\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\tForgot Password?\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tcursor: 'default',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{showLoading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : emailSent ? (\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<Card.Body className='pl-0'>\r\n\t\t\t\t\t\t\t\t\t<Card.Title>Email Sent</Card.Title>\r\n\t\t\t\t\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t\t\t\t\tPlease use the link sent to your email\r\n\t\t\t\t\t\t\t\t\t\tand reset your password right away!\r\n\t\t\t\t\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleEmailSubmit}>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\tclassName='remember-password'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(false)\r\n\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\tI remember my password\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default LoginPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tForm,\r\n\tButton,\r\n\tInputGroup,\r\n\tFloatingLabel,\r\n\tRow,\r\n\tCol,\r\n} from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport { registerUser } from '../actions/userActions';\r\nimport '../styles/login-register.css';\r\n\r\nconst RegisterPage = ({ location, history }) => {\r\n\tconst [typePassword, setTypePassword] = useState('password');\r\n\tconst [typeConfirmPassword, setTypeConfirmPassword] = useState('password');\r\n\r\n\tconst [name, setName] = useState('');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [confirmPassword, setConfirmPassword] = useState('');\r\n\tconst [message, setMessage] = useState(null);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst redirect = location.search ? location.search.split('=')[1] : '';\r\n\tconst userRegister = useSelector((state) => state.userRegister);\r\n\tconst { loading, userInfo, error } = userRegister;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInfo) {\r\n\t\t\tlocalStorage.setItem('promptEmailVerfication', 'true');\r\n\t\t\thistory.push(redirect);\r\n\t\t}\r\n\t}, [history, redirect, userInfo]);\r\n\r\n\tconst showHidePassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypePassword(typePassword === 'password' ? 'text' : 'password');\r\n\t};\r\n\tconst showHideConfirmPassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypeConfirmPassword(\r\n\t\t\ttypeConfirmPassword === 'password' ? 'text' : 'password'\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (password !== confirmPassword) {\r\n\t\t\tsetMessage('Passwords do not match. Please retry.');\r\n\t\t} else {\r\n\t\t\tdispatch(registerUser(name, email, password));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t<h1 onClick={() => history.push('/login')}>Sign In</h1>\r\n\t\t\t\t\t<h1\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\tboxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\tMozBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={() => history.push('/register')}>\r\n\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t{message && (\r\n\t\t\t\t\t<Message dismissible variant='warning' duration={10}>\r\n\t\t\t\t\t\t{message}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t)}\r\n\t\t\t\t{error && (\r\n\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t)}\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t<Form.Group controlId='name' className='mb-2'>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='nameinput'\r\n\t\t\t\t\t\t\t\tlabel='Name'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Enter Name'\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group controlId='email' className='my-2'>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\tlabel='Email Address'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\ttype={typePassword}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={showHidePassword}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{typePassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\tcontrolId='confirmpasswordinput'\r\n\t\t\t\t\t\t\t\t\tlabel='Confirm password'\r\n\t\t\t\t\t\t\t\t\tstyle={{ display: 'flex', width: '100%' }}\r\n\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\ttype={typeConfirmPassword}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Confirm your password'\r\n\t\t\t\t\t\t\t\t\t\tvalue={confirmPassword}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetConfirmPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={showHideConfirmPassword}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: '-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{typeConfirmPassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tRegister\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default RegisterPage;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n\tForm,\r\n\tButton,\r\n\tRow,\r\n\tInputGroup,\r\n\tCol,\r\n\tCard,\r\n\tTable,\r\n\tImage,\r\n\tFloatingLabel,\r\n} from 'react-bootstrap';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport {\r\n\tsendVerficationEmail,\r\n\tgetUserDetails,\r\n\tupdateUserProfile,\r\n\trefreshLogin,\r\n} from '../actions/userActions';\r\nimport { listMyOrders } from '../actions/orderActions';\r\nimport { USER_PROFILE_UPDATE_RESET } from '../constants/userConstants';\r\nimport Meta from '../components/Meta';\r\nimport axios from 'axios';\r\nimport getDateString from '../utils/getDateString';\r\nimport '../styles/profile-page.css';\r\n\r\nconst ProfilePage = ({ history }) => {\r\n\tconst inputFile = useRef(null);\r\n\tconst [showSubmitButton, setShowSubmitButton] = useState(false); // sisable the submit button unless some user detail is changed by user\r\n\tconst [typePassword, setTypePassword] = useState('password');\r\n\tconst [typeConfirmPassword, setTypeConfirmPassword] = useState('password');\r\n\r\n\tconst [name, setName] = useState('');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [avatar, setAvatar] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [confirmPassword, setConfirmPassword] = useState('');\r\n\tconst [message, setMessage] = useState(null);\r\n\tconst [allOrders, setAllOrders] = useState([]);\r\n\r\n\tconst [uploading, setUploading] = useState(false);\r\n\tconst [errorImageUpload, setErrorImageUpload] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { loading, user, error } = userDetails;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userProfileUpdate = useSelector((state) => state.userProfileUpdate);\r\n\tconst { success } = userProfileUpdate;\r\n\r\n\tconst orderListUser = useSelector((state) => state.orderListUser);\r\n\tconst {\r\n\t\tloading: loadingOrdersList,\r\n\t\torders,\r\n\t\terror: errorOrdersList,\r\n\t} = orderListUser;\r\n\r\n\t// check whether verification email has to be sent\r\n\tconst userSendEmailVerfication = useSelector(\r\n\t\t(state) => state.userSendEmailVerfication\r\n\t);\r\n\tconst { emailSent, hasError } = userSendEmailVerfication;\r\n\r\n\t// refresh access token for user details error\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\t// set orders to local state\r\n\tuseEffect(() => {\r\n\t\tif (orders && orders.length) {\r\n\t\t\tsetAllOrders([...orders]);\r\n\t\t}\r\n\t}, [orders]);\r\n\r\n\t// check if any of the input fields value is changed, only then show the submit button\r\n\tuseEffect(() => {\r\n\t\tif (userInfo) {\r\n\t\t\tif (name && userInfo.name !== name) setShowSubmitButton(true);\r\n\t\t\telse if (email && userInfo.email !== email)\r\n\t\t\t\tsetShowSubmitButton(true);\r\n\t\t\telse if (password || confirmPassword) setShowSubmitButton(true);\r\n\t\t\telse setShowSubmitButton(false);\r\n\t\t}\r\n\t}, [name, email, password, confirmPassword, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(listMyOrders());\r\n\t}, [dispatch]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!userInfo) {\r\n\t\t\thistory.push('/login');\r\n\t\t} else {\r\n\t\t\t// if user is null, first fetch it and then set its details to the local state\r\n\t\t\tif (!user || !user.name || success) {\r\n\t\t\t\tdispatch(listMyOrders());\r\n\t\t\t\tdispatch({ type: USER_PROFILE_UPDATE_RESET });\r\n\t\t\t\tuserInfo\r\n\t\t\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t\t\t: dispatch(getUserDetails('profile'));\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tuserInfo.isSocialLogin\r\n\t\t\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t\t\t: dispatch(getUserDetails('profile'));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetName(user.name);\r\n\t\t\t\tsetEmail(user.email);\r\n\t\t\t\tsetAvatar(user.avatar);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [history, userInfo, user, dispatch, success, loadingOrdersList]);\r\n\r\n\tconst showHidePassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypePassword(typePassword === 'password' ? 'text' : 'password');\r\n\t};\r\n\r\n\tconst showHideConfirmPassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypeConfirmPassword(\r\n\t\t\ttypeConfirmPassword === 'password' ? 'text' : 'password'\r\n\t\t);\r\n\t};\r\n\r\n\t// handle file upload to aws bucket\r\n\tconst handleImageUpload = async (e) => {\r\n\t\tconst file = e.target.files[0];\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('image', file);\r\n\t\tsetUploading(true);\r\n\t\ttry {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.post('/api/upload', formData, config);\r\n\t\t\tsetAvatar(data);\r\n\t\t\tdispatch(\r\n\t\t\t\tupdateUserProfile({\r\n\t\t\t\t\tid: user.id,\r\n\t\t\t\t\tavatar: data,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tsetUploading(false);\r\n\t\t} catch (error) {\r\n\t\t\tsetErrorImageUpload('Please choose a valid image');\r\n\t\t\tsetUploading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// handle image overlay div's click to upload new file\r\n\tconst handleImageClick = () => {\r\n\t\tinputFile.current.click();\r\n\t};\r\n\r\n\t// update user details\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (password !== confirmPassword) {\r\n\t\t\tsetMessage('Passwords do not match. Please retry.');\r\n\t\t} else {\r\n\t\t\tdispatch(\r\n\t\t\t\tupdateUserProfile({\r\n\t\t\t\t\tid: user.id,\r\n\t\t\t\t\tname,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tavatar,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t\tconfirmPassword,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Row className='mt-2'>\r\n\t\t\t<Meta title='My Profile | Kosells' />\r\n\t\t\t{userInfo && !userInfo.isConfirmed ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{emailSent && (\r\n\t\t\t\t\t\t<Message variant='success' dismissible>\r\n\t\t\t\t\t\t\tA verification link has been sent your mail!\r\n\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{hasError && (\r\n\t\t\t\t\t\t<Message dismissible variant='danger'>\r\n\t\t\t\t\t\t\t{hasError}\r\n\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<Card style={{ margin: '0' }} className='mb-3'>\r\n\t\t\t\t\t\t<Card.Body className='ps-0 '>\r\n\t\t\t\t\t\t\t<Card.Title style={{ fontWeight: 'bold' }}>\r\n\t\t\t\t\t\t\t\tAccount Not Verified\r\n\t\t\t\t\t\t\t</Card.Title>\r\n\t\t\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t\t\t{`${userInfo.name}, `} your account is not yet\r\n\t\t\t\t\t\t\t\tverfied. Please{' '}\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\tclassName='p-0'\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '0.9em',\r\n\t\t\t\t\t\t\t\t\t\tmargin: '0 0 0.1em 0',\r\n\t\t\t\t\t\t\t\t\t\tfocus: 'none',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\tsendVerficationEmail(userInfo.email)\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\tclick here\r\n\t\t\t\t\t\t\t\t</Button>{' '}\r\n\t\t\t\t\t\t\t\tto send a verfication email.\r\n\t\t\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t\t<Col\r\n\t\t\t\tmd={3}\r\n\t\t\t\tstyle={\r\n\t\t\t\t\tuserInfo && !userInfo.isConfirmed\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\topacity: '0.5',\r\n\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\topacity: '1',\r\n\t\t\t\t\t\t\t\tpointerEvents: '',\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t}>\r\n\t\t\t\t<h2 className='text-center'>My Profile</h2>\r\n\t\t\t\t{message && (\r\n\t\t\t\t\t<Message dismissible variant='warning' duration={8}>\r\n\t\t\t\t\t\t{message}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t)}\r\n\t\t\t\t{error && error !== 'Not authorised. Token failed' && (\r\n\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t)}\r\n\t\t\t\t{success && (\r\n\t\t\t\t\t<Message dismissible variant='success' duration={8}>\r\n\t\t\t\t\t\tProfile Updated!\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t)}\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div style={{ display: 'flex', flexFlow: 'column nowrap' }}>\r\n\t\t\t\t\t\t{errorImageUpload && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t\t\t{errorImageUpload}\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{uploading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='profile-page-image'\r\n\t\t\t\t\t\t\t\tstyle={{ alignSelf: 'center' }}>\r\n\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\tsrc={avatar}\r\n\t\t\t\t\t\t\t\t\talt={name}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\theight: '5em',\r\n\t\t\t\t\t\t\t\t\t\twidth: '5em',\r\n\t\t\t\t\t\t\t\t\t\tmarginBottom: '1em',\r\n\t\t\t\t\t\t\t\t\t\tborder: '1px solid #ced4da',\r\n\t\t\t\t\t\t\t\t\t\tborderRadius: '50%',\r\n\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName='image-overlay'\r\n\t\t\t\t\t\t\t\t\tonClick={handleImageClick}>\r\n\t\t\t\t\t\t\t\t\tClick to upload image\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{/* for image upload */}\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='file'\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tid='file'\r\n\t\t\t\t\t\t\tref={inputFile}\r\n\t\t\t\t\t\t\tonChange={handleImageUpload}\r\n\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t<Form.Group controlId='name'>\r\n\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\tcontrolId='nameinput'\r\n\t\t\t\t\t\t\t\t\tlabel='Name'\r\n\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Name'\r\n\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetName(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\t\t\tcontrolId='email'\r\n\t\t\t\t\t\t\t\tclassName='my-2'\r\n\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\tuserInfo && userInfo.isSocialLogin\r\n\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\topacity: '0.8',\r\n\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t: {}\r\n\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\tlabel='Email'\r\n\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t{userInfo && !userInfo.isSocialLogin && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup className='d-block'>\r\n\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'flex' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={typePassword}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowHidePassword\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typePassword ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup className='d-block'>\r\n\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='confirmpasswordinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Confirm Password'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'flex' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={typeConfirmPassword}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Confirm password'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={confirmPassword}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetConfirmPassword(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowHideConfirmPassword\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{typeConfirmPassword ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div className='d-grid mb-3'>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\tdisabled={!showSubmitButton}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\tUpdate Profile\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Col>\r\n\t\t\t{/* display orders */}\r\n\t\t\t<Col\r\n\t\t\t\tmd={9}\r\n\t\t\t\tstyle={\r\n\t\t\t\t\tuserInfo && !userInfo.isConfirmed\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\topacity: '0.5',\r\n\t\t\t\t\t\t\t\tpointerEvents: 'none',\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\topacity: '1',\r\n\t\t\t\t\t\t\t\tpointerEvents: '',\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t}>\r\n\t\t\t\t{allOrders.length ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h2 className='text-center'>My Orders</h2>\r\n\t\t\t\t\t\t{loadingOrdersList ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : errorOrdersList ? (\r\n\t\t\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t\t\t{errorOrdersList}\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tstriped\r\n\t\t\t\t\t\t\t\tbordered\r\n\t\t\t\t\t\t\t\tresponsive\r\n\t\t\t\t\t\t\t\tclassName='table-sm text-center'>\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th>DATE</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>TOTAL</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>PAID</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>DELIVERED</th>\r\n\t\t\t\t\t\t\t\t\t\t<th>ACTION</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t{orders.map((order, idx) => (\r\n\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{getDateString(order.createdAt)}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.totalPrice.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.isPaid ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgetDateString(order.paidAt)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'red',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.isDelivered ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgetDateString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\torder.deliveredAt\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'red',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/order/${order._id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: '0' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tDetails\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Card style={{ border: 'none', margin: '0 auto' }}>\r\n\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t<Card.Title>No Orders Yet!</Card.Title>\r\n\t\t\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t\t\tDetails about all your orders will show up here.{' '}\r\n\t\t\t\t\t\t\t\t<Link to='/'>Continue Shopping</Link>\r\n\t\t\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t)}\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n};\r\n\r\nexport default ProfilePage;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { Card } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport { confirmUser } from '../actions/userActions';\r\nimport Meta from '../components/Meta';\r\n\r\nconst ConfirmPage = ({ match, history }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst userConfirm = useSelector((state) => state.userConfirm); // get the userInfo to check if user is confirmed or not\r\n\tconst { loading, error, isConfirmed } = userConfirm;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInfo) {\r\n\t\t\tsetIsLoggedIn(true);\r\n\t\t} else {\r\n\t\t\tsetIsLoggedIn(false);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\t// confirm user once the email token is available\r\n\t\tdispatch(confirmUser(match.params.token, isLoggedIn));\r\n\t}, [dispatch, match, isLoggedIn]);\r\n\r\n\tif (loading || (!isConfirmed && !error)) {\r\n\t\treturn <Loader />;\r\n\t} else if (error) {\r\n\t\t// redirect to login page after a 10 seconds\r\n\t\tsetTimeout(() => {\r\n\t\t\thistory.push('/login');\r\n\t\t}, 10000);\r\n\t\treturn (\r\n\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\tVerfication Failed. Please try to login again.\r\n\t\t\t</Message>\r\n\t\t);\r\n\t} else if (isConfirmed) {\r\n\t\t// set a variable in local storage to fill email aftrer redirecting to login page after email confirmation\r\n\t\tlocalStorage.setItem('fillEmailOnLoginPage', 'true');\r\n\t\treturn (\r\n\t\t\t<Card style={{ border: 'none', margin: '0 auto' }}>\r\n\t\t\t\t<Meta title='Confirm Password | Kosells' />\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<Card.Title>Account Confirmed</Card.Title>\r\n\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t{setIsLoggedIn\r\n\t\t\t\t\t\t\t? 'Your account has been successfully verified! Go on and shop for the best deals of the day!'\r\n\t\t\t\t\t\t\t: `Your account has been successfully verified! Please\r\n\t\t\t\t\t\tlogin and start exploring the best deals on all your\r\n\t\t\t\t\t\tfavorite products.`}\r\n\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t{!setIsLoggedIn ? <Link to='/login'>Login</Link> : null}\r\n\t\t\t\t</Card.Body>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default ConfirmPage;\r\n","import React from 'react';\r\nimport { Nav } from 'react-bootstrap';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport '../styles/check-status.css';\r\n\r\n// there are 4 steps in the checkout process\r\n// step 1 is logging in\r\n// step 2 is shipping address input\r\n// step 3 is selecting payment option\r\n// step 4 is placing the order and seeing payment button\r\nconst CheckoutStatus = ({ step1, step2, step3, step4 }) => {\r\n\treturn (\r\n\t\t<Nav className='status-bar'>\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 ? { background: '#2c3e50' } : { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step1 ? (\r\n\t\t\t\t\t<LinkContainer to='/login'>\r\n\t\t\t\t\t\t<Nav.Link>Sign In</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Sign In</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className='connection' />\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 && step2\r\n\t\t\t\t\t\t\t? { background: '#2c3e50' }\r\n\t\t\t\t\t\t\t: { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step2 ? (\r\n\t\t\t\t\t<LinkContainer to='/shipping'>\r\n\t\t\t\t\t\t<Nav.Link>Shipping</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Shipping</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className='connection' />\r\n\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 && step2 && step3\r\n\t\t\t\t\t\t\t? { background: '#2c3e50' }\r\n\t\t\t\t\t\t\t: { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step3 ? (\r\n\t\t\t\t\t<LinkContainer to='/payment'>\r\n\t\t\t\t\t\t<Nav.Link>Payment</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Payment</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className='connection' />\r\n\r\n\t\t\t<div className='status-checkpoint'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='circle'\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\tstep1 && step2 && step3 && step4\r\n\t\t\t\t\t\t\t? { background: '#2c3e50' }\r\n\t\t\t\t\t\t\t: { background: '' }\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{step4 ? (\r\n\t\t\t\t\t<LinkContainer to='/placeorder'>\r\n\t\t\t\t\t\t<Nav.Link>Place Order</Nav.Link>\r\n\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Nav.Link disabled>Place Order</Nav.Link>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</Nav>\r\n\t);\r\n};\r\n\r\nexport default CheckoutStatus;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button, FloatingLabel } from 'react-bootstrap';\r\nimport FormContainer from '../components/FormContainer';\r\nimport CheckoutStatus from '../components/CheckoutStatus';\r\nimport { saveShippingAddress } from '../actions/cartActions';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nconst ShippingPage = ({ history }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { cartItems, shippingAddress } = cart;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error } = userDetails;\r\n\r\n\tconst [address, setAddress] = useState(shippingAddress.address);\r\n\tconst [city, setCity] = useState(shippingAddress.city);\r\n\tconst [postalCode, setPostalCode] = useState(shippingAddress.houseNumber);\r\n\tconst [country, setCountry] = useState(shippingAddress.building);\r\n\r\n\t// fetch user details from the redux store\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// update access token to a new ine using the refresh tokens\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!(cartItems.length && userInfo)) {\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t}, [cartItems, history, userInfo]);\r\n\r\n\t// save shipping address and move to payment screen\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(\r\n\t\t\tsaveShippingAddress({\r\n\t\t\t\taddress,\r\n\t\t\t\tcity,\r\n\t\t\t\tpostalCode,\r\n\t\t\t\tcountry,\r\n\t\t\t})\r\n\t\t);\r\n\t\thistory.push('/payment');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t<CheckoutStatus step1 step2 />\r\n\t\t\t<h1>Shipping Address</h1>\r\n\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t<Form.Group controlId='address'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='addressinput'\r\n\t\t\t\t\t\tlabel='Address'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter address'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={address}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setAddress(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId='city'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='cityinput'\r\n\t\t\t\t\t\tlabel='City'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter City'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={city}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setCity(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId='postalCode'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='postalcodeinput'\r\n\t\t\t\t\t\tlabel='Postal Code'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter Postal Code'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={postalCode}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setPostalCode(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId='country'>\r\n\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\tcontrolId='countryinput'\r\n\t\t\t\t\t\tlabel='Country'\r\n\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\tplaceholder='Enter Country'\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={country}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tonChange={(e) => setCountry(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tContinue\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default ShippingPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button, Col } from 'react-bootstrap';\r\nimport FormContainer from '../components/FormContainer';\r\nimport CheckoutStatus from '../components/CheckoutStatus';\r\nimport { savePaymentMethod } from '../actions/cartActions';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nconst PaymentPage = ({ history }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { shippingAddress } = cart;\r\n\r\n\tconst [paymentMethod, setPaymentMethod] = useState('Credit/Debit Card'); // default option is the stripe one, but users might not understand 'stripe'\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error } = userDetails;\r\n\r\n\t// fetch user details\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// refresh the access tokens when user details throws an error\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\t// if shipping address is empty, redirect\r\n\tuseEffect(() => {\r\n\t\tif (!shippingAddress) {\r\n\t\t\thistory.push('/shipping');\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tconst handleChange = (e) => {\r\n\t\tsetPaymentMethod(e.target.value);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(savePaymentMethod(paymentMethod));\r\n\t\thistory.push('/placeorder');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t{/* three steps are done in the checkout process */}\r\n\t\t\t<CheckoutStatus step1 step2 step3 />\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\tflexFlow: 'column nowrap',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t}}>\r\n\t\t\t\t<h1>Payment Method</h1>\r\n\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\tlabel='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tid='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tname='paymentMethod'\r\n\t\t\t\t\t\t\t\tvalue='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tchecked={paymentMethod === 'Credit/Debit Card'}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\tlabel='PayPal Account'\r\n\t\t\t\t\t\t\t\tid='PayPal'\r\n\t\t\t\t\t\t\t\tname='paymentMethod'\r\n\t\t\t\t\t\t\t\tvalue='PayPal'\r\n\t\t\t\t\t\t\t\tchecked={paymentMethod === 'PayPal'}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<div className='d-grid'>\r\n\t\t\t\t\t\t<Button type='submit' className='my-3' size='lg'>\r\n\t\t\t\t\t\t\tContinue\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default PaymentPage;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport CheckoutStatus from '../components/CheckoutStatus';\r\nimport Message from '../components/Message';\r\nimport Loader from '../components/Loader';\r\nimport { createOrder } from '../actions/orderActions';\r\nimport { CART_RESET } from '../constants/cartConstants';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nconst PlaceOrderPage = ({ history }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { cartItems, shippingAddress, paymentMethod } = cart;\r\n\r\n\tconst orderCreate = useSelector((state) => state.orderCreate);\r\n\tconst { order, loading, success, error } = orderCreate;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\t// fetch the userinfo from reducx store\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// refresh access token when user detail throws error\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (success) {\r\n\t\t\tlocalStorage.removeItem('cartItems');\r\n\t\t\tdispatch({ type: CART_RESET, payload: shippingAddress }); // remove items from cart once paid, but keep the shipping address in store\r\n\t\t\thistory.push(`/order/${order._id}`);\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [success, history]);\r\n\r\n\t// All prices, tax is randomly  assigned\r\n\tcart.itemsPrice = cartItems.reduce(\r\n\t\t(acc, item) => acc + item.price * item.qty,\r\n\t\t0\r\n\t);\r\n\r\n\tcart.shippingPrice = cart.itemsPrice > 8000 ? 500 : 300;\r\n\tcart.taxPrice = 0.18 * cart.itemsPrice;\r\n\tcart.totalPrice = cart.itemsPrice + cart.taxPrice + cart.shippingPrice;\r\n\r\n\tconst handleOrder = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(\r\n\t\t\tcreateOrder({\r\n\t\t\t\torderItems: cartItems,\r\n\t\t\t\tshippingAddress,\r\n\t\t\t\tpaymentMethod,\r\n\t\t\t\titemsPrice: cart.itemsPrice,\r\n\t\t\t\tshippingPrice: cart.shippingPrice,\r\n\t\t\t\ttaxPrice: cart.taxPrice,\r\n\t\t\t\ttotalPrice: cart.totalPrice,\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{/* last step in the ckecout process */}\r\n\t\t\t<CheckoutStatus step1 step2 step3 step4 />\r\n\t\t\t<Row>\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Col md={8}>\r\n\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<h2>Shipping</h2>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<strong>Address: </strong>{' '}\r\n\t\t\t\t\t\t\t\t\t\t{shippingAddress.address},{' '}\r\n\t\t\t\t\t\t\t\t\t\t{shippingAddress.city}-\r\n\t\t\t\t\t\t\t\t\t\t{shippingAddress.houseNumber},{' '}\r\n\t\t\t\t\t\t\t\t\t\t{shippingAddress.building}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<h2>Payment Method</h2>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<strong>Method: </strong>{' '}\r\n\t\t\t\t\t\t\t\t\t\t{paymentMethod}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<h2>Cart Items</h2>\r\n\t\t\t\t\t\t\t\t\t{cartItems.length !== 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t\t\t\t{cartItems.map((item, idx) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ListGroup.Item key={idx}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='product-image'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={item.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trounded\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/product/${item.product}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col md={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.qty} x{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.price} ={' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.qty *\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.price\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Message>Your cart is empty</Message>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col md={4}>\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item className='text-center'>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='text-center'>\r\n\t\t\t\t\t\t\t\t\t\t\tOrder Summary\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Subtotal</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{Number(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcart.itemsPrice\r\n\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Shipping</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{Number(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcart.shippingPrice\r\n\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Tax</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{Number(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcart.taxPrice\r\n\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Total</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{Number(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcart.totalPrice\r\n\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString('en-IN', {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item className='d-grid gap-2'>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!cartItems.length}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleOrder}>\r\n\t\t\t\t\t\t\t\t\t\t\tPlace Order\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Row>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default PlaceOrderPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button } from 'react-bootstrap';\r\nimport { payOrder } from '../actions/orderActions';\r\nimport { savePaymentMethod } from '../actions/cartActions';\r\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js'; // for stripe CC component\r\nimport Message from '../components/Message';\r\n\r\nconst CheckoutForm = ({ price, orderID }) => {\r\n\tconst [error, setError] = useState(''); // from the stripe component itself\r\n\tconst dispatch = useDispatch();\r\n\tconst [clientSecret, setClientSecret] = useState(''); // from the payment intent sent from server\r\n\tconst stripe = useStripe();\r\n\tconst elements = useElements();\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\t// STEP 1: create a payment intent and getting the secret\r\n\tuseEffect(() => {\r\n\t\tconst getClientSecret = async () => {\r\n\t\t\tconst { data } = await axios.post(\r\n\t\t\t\t'/api/orders/stripe-payment',\r\n\t\t\t\t{ price, email: userInfo.email },\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tsetClientSecret(data.clientSecret);\r\n\t\t};\r\n\r\n\t\tif (userInfo && price) getClientSecret();\r\n\t}, [price, userInfo]);\r\n\r\n\t// STEP 2: make the payment after filling the form properly\r\n\tconst makePayment = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!stripe || !elements) {\r\n\t\t\t// Stripe.js has not yet loaded.\r\n\t\t\t// Make  sure to disable form submission until Stripe.js has loaded.\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (clientSecret) {\r\n\t\t\tconst payload = await stripe.confirmCardPayment(clientSecret, {\r\n\t\t\t\tpayment_method: {\r\n\t\t\t\t\tcard: elements.getElement(CardElement),\r\n\t\t\t\t\tbilling_details: {\r\n\t\t\t\t\t\tname: userInfo.name,\r\n\t\t\t\t\t\temail: userInfo.email,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\t// console.log(payload.error);\r\n\t\t\tif (!payload.error) {\r\n\t\t\t\tdispatch(savePaymentMethod('Stripe'));\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tpayOrder(orderID, {\r\n\t\t\t\t\t\t...payload.paymentIntent,\r\n\t\t\t\t\t\tpaymentMode: 'stripe',\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tsetError(payload.error.message);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\twindow.location.reload();\r\n\t\t}\r\n\t};\r\n\r\n\t// render a checkout form for filling details about credit or debit cards\r\n\treturn (\r\n\t\t<Form id='payment-form' onSubmit={makePayment}>\r\n\t\t\t{error && (\r\n\t\t\t\t<Message dismissible variant='danger'>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t<Form.Group\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmargin: '1em 0',\r\n\t\t\t\t\tfontSize: '1em',\r\n\t\t\t\t}}>\r\n\t\t\t\t<CardElement\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\tbase: {\r\n\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\tcolor: '#424770',\r\n\t\t\t\t\t\t\t\t'::placeholder': {\r\n\t\t\t\t\t\t\t\t\tcolor: '#aab7c4',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tinvalid: {\r\n\t\t\t\t\t\t\t\tcolor: '#9e2146',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tid='card-element'\r\n\t\t\t\t/>\r\n\t\t\t</Form.Group>\r\n\t\t\t<div className='d-grid'>\r\n\t\t\t\t<Button disabled={!stripe} size='lg' type='submit'>\r\n\t\t\t\t\tPay Now\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nexport default CheckoutForm;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Row, Col, ListGroup, Image, Card, Button } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { PayPalButton } from 'react-paypal-button-v2'; // for paypal payments\r\nimport axios from 'axios';\r\nimport Message from '../components/Message';\r\nimport Loader from '../components/Loader';\r\nimport {\r\n\tgetOrderDetails,\r\n\tpayOrder,\r\n\tdeliverOrder,\r\n} from '../actions/orderActions';\r\nimport {\r\n\tORDER_PAY_RESET,\r\n\tORDER_DELIVER_RESET,\r\n} from '../constants/orderConstants';\r\nimport { savePaymentMethod } from '../actions/cartActions';\r\nimport { Elements } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { refreshLogin } from '../actions/userActions';\r\nimport CheckoutForm from '../components/CheckoutForm'; //stripe checkout form\r\nimport getDateString from '../utils/getDateString';\r\n\r\nconst OrderPage = ({ match, history }) => {\r\n\t// load stripe\r\n\tconst stripePromise = loadStripe(\r\n\t\tprocess.env.REACT_APP_STRIPE_PUBLISHABLE_KEY\r\n\t);\r\n\t// for paypal payment\r\n\tconst [SDKReady, setSDKReady] = useState(false);\r\n\tconst dispatch = useDispatch();\r\n\tconst orderID = match.params.id;\r\n\r\n\tconst orderDetails = useSelector((state) => state.orderDetails);\r\n\tconst { loading, order, error } = orderDetails;\r\n\r\n\tconst orderPay = useSelector((state) => state.orderPay);\r\n\tconst { loading: loadingPay, success: successPay } = orderPay;\r\n\r\n\tconst orderDeliver = useSelector((state) => state.orderDeliver);\r\n\tconst { loading: loadingDeliver, success: successDeliver } = orderDeliver;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\t// get new access tokens using the refresh token, is user details throws an error\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\t// set order to paid or delivered, and fetch updated orders\r\n\tuseEffect(() => {\r\n\t\tif (!order || order._id !== orderID || successPay || successDeliver) {\r\n\t\t\tif (successPay) dispatch({ type: ORDER_PAY_RESET });\r\n\t\t\tif (successDeliver) dispatch({ type: ORDER_DELIVER_RESET });\r\n\t\t\tdispatch(getOrderDetails(orderID));\r\n\t\t}\r\n\t}, [order, orderID, dispatch, successPay, successDeliver]);\r\n\r\n\t// add the script required for paypal payments dynamically, to avoid possible attacks\r\n\tuseEffect(() => {\r\n\t\tconst addScript = async () => {\r\n\t\t\tconst config = userInfo.isSocialLogin\r\n\t\t\t\t? {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `SocialLogin ${userInfo.id}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: `Bearer ${userInfo.accessToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  };\r\n\t\t\tconst { data: clientID } = await axios.get(\r\n\t\t\t\t'/api/config/paypal',\r\n\t\t\t\tconfig\r\n\t\t\t);\r\n\t\t\t// add the script\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.async = true;\r\n\t\t\tscript.type = 'text/javascript';\r\n\t\t\tscript.src = `https://www.paypal.com/sdk/js?client-id=${clientID}&currency=USD&disable-funding=credit,card`;\r\n\t\t\tscript.onload = () => setSDKReady(true);\r\n\t\t\tdocument.body.appendChild(script);\r\n\t\t};\r\n\t\tif (!userInfo) history.push('/login'); // if not loggein in\r\n\t\tif (!SDKReady) addScript();\r\n\t}, [userInfo, SDKReady, history]);\r\n\r\n\t// save the payment mthod as paypal\r\n\tconst successPaymentHandler = (paymentResult) => {\r\n\t\tdispatch(savePaymentMethod('PayPal'));\r\n\t\tdispatch(\r\n\t\t\tpayOrder(orderID, { ...paymentResult, paymentMode: 'paypal' })\r\n\t\t);\r\n\t};\r\n\r\n\t// set order as delivered\r\n\tconst successDeliveryHandler = () => {\r\n\t\tdispatch(deliverOrder(orderID));\r\n\t};\r\n\r\n\treturn loading ? (\r\n\t\t<Loader />\r\n\t) : error ? (\r\n\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t{error}\r\n\t\t</Message>\r\n\t) : (\r\n\t\t<>\r\n\t\t\t<h2>Order {orderID}</h2>\r\n\t\t\t<Row>\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Col md={8}>\r\n\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<h2>Shipping</h2>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<strong>Name: </strong>\r\n\t\t\t\t\t\t\t\t\t\t{order.user.name}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<strong>Email: </strong>\r\n\t\t\t\t\t\t\t\t\t\t<a href={`mailto:${order.user.email}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t{order.user.email}\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<strong>Address: </strong>{' '}\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingAddress.address},{' '}\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingAddress.city}-\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingAddress.houseNumber},{' '}\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingAddress.building}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{order.isDelivered ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<Message variant='success'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tDelivered at:{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{getDateString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\torder.deliveredAt\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<Message variant='danger'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tNot Delivered\r\n\t\t\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<h2>Payment Method</h2>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<strong>Method: </strong>{' '}\r\n\t\t\t\t\t\t\t\t\t\t{order.paymentMethod}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{order.isPaid ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<Message variant='success'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tPaid at:{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{getDateString(order.paidAt)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<Message variant='danger'>\r\n\t\t\t\t\t\t\t\t\t\t\t\tNot Paid\r\n\t\t\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<h2>Cart Items</h2>\r\n\t\t\t\t\t\t\t\t\t{order.orderItems.length !== 0 ? (\r\n\t\t\t\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'red',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}></div>\r\n\t\t\t\t\t\t\t\t\t\t\t{order.orderItems.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(item, idx) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ListGroup.Item key={idx}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='product-image'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.name\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfluid\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trounded\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/product/${item.product}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Col md={4}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.qty} x{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.price} ={' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.qty *\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.price\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Message>No order</Message>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col md={4}>\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<ListGroup variant='flush'>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<h2 className='text-center'>\r\n\t\t\t\t\t\t\t\t\t\t\tOrder Summary\r\n\t\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Subtotal</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.itemsPrice.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Shipping</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingPrice.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Tax</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.taxPrice.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Total</strong>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.totalPrice.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t{/* show paypal button or the stripe checkout form */}\r\n\t\t\t\t\t\t\t\t\t{!order.isPaid && (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t{order.paymentMethod ===\r\n\t\t\t\t\t\t\t\t\t\t\t'PayPal' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{loadingPay && <Loader />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{!SDKReady ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PayPalButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshape: 'rect',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'gold',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlayout: 'vertical',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'pay',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency='USD'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// converting INR to USD, as paypal cannot support INR\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tamount={Number(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\torder.totalPrice /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t72\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).toFixed(2)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSuccess={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccessPaymentHandler\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{loadingPay && <Loader />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Elements\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstripe={stripePromise}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* price in paisa */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckoutForm\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprice={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\torder.totalPrice *\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\torderID={orderID}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Elements>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{/* show this only to admins, after payment is done */}\r\n\t\t\t\t\t\t\t\t\t{userInfo &&\r\n\t\t\t\t\t\t\t\t\t\tuserInfo.isAdmin &&\r\n\t\t\t\t\t\t\t\t\t\torder.isPaid &&\r\n\t\t\t\t\t\t\t\t\t\t!order.isDelivered && (\r\n\t\t\t\t\t\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{loadingDeliver && <Loader />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='d-grid'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='info'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccessDeliveryHandler\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tMark as Delivered\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</ListGroup>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Row>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default OrderPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Form, Button, InputGroup, FloatingLabel } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport { resetUserPassword } from '../actions/userActions';\r\n\r\nconst PasswordResetPage = ({ match, history }) => {\r\n\tconst [name, setName] = useState('');\r\n\tconst [typePassword, setTypePassword] = useState('password');\r\n\tconst [typeConfirmPassword, setTypeConfirmPassword] = useState('password');\r\n\tconst [message, setMessage] = useState(null);\r\n\tconst [confirmPassword, setConfirmPassword] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\tconst userResetPassword = useSelector((state) => state.userResetPassword);\r\n\tconst { loading, resetPassword, error } = userResetPassword;\r\n\r\n\t// get the name stored in the local storage and ask that user to reset password\r\n\tuseEffect(() => {\r\n\t\tconst nameFromLocalStorage = localStorage.getItem('EcommerceUserName');\r\n\t\tif (nameFromLocalStorage) {\r\n\t\t\tsetName(nameFromLocalStorage);\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (resetPassword) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thistory.push('/login');\r\n\t\t\t}, 10000);\r\n\t\t}\r\n\t}, [history, resetPassword]);\r\n\r\n\tconst showHidePassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypePassword(typePassword === 'password' ? 'text' : 'password');\r\n\t};\r\n\tconst showHideConfirmPassword = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetTypeConfirmPassword(\r\n\t\t\ttypeConfirmPassword === 'password' ? 'text' : 'password'\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (password !== confirmPassword) {\r\n\t\t\tsetMessage('Passwords do not match. Please retry.');\r\n\t\t} else {\r\n\t\t\tdispatch(resetUserPassword(match.params.token, password));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t<h1>{name ? `${name}, reset password` : 'Reset Password'}</h1>\r\n\t\t\t{message && (\r\n\t\t\t\t<Message dismissible duration={8} variant='warning'>\r\n\t\t\t\t\t{message}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{resetPassword && (\r\n\t\t\t\t<Message dismissible variant='success' duration={8}>\r\n\t\t\t\t\tPassword Changed Successfully.\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{error && (\r\n\t\t\t\t<Message dismissible variant='danger'>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : (\r\n\t\t\t\t<Form onSubmit={handleSubmit} style={{ width: '33em' }}>\r\n\t\t\t\t\t<Form.Group className='mb-2'>\r\n\t\t\t\t\t\t<InputGroup style={{ width: '100%' }}>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\ttype={typePassword}\r\n\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\twidth: '205%',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tsetPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\tonClick={showHidePassword}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: '1em',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\twidth: '17.5%',\r\n\t\t\t\t\t\t\t\t\t\theight: '78%',\r\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '15rem',\r\n\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{typePassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Form.Group className='my-2'>\r\n\t\t\t\t\t\t<InputGroup style={{ width: '100%' }}>\r\n\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\tcontrolId='confirmpasswordinput'\r\n\t\t\t\t\t\t\t\tlabel='Confirm password'\r\n\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\ttype={typeConfirmPassword}\r\n\t\t\t\t\t\t\t\t\tplaceholder='Confirm your password'\r\n\t\t\t\t\t\t\t\t\tvalue={confirmPassword}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\twidth: '205%',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tsetConfirmPassword(e.target.value)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\tonClick={showHideConfirmPassword}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpaddingLeft: '1em',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\twidth: '17.5%',\r\n\t\t\t\t\t\t\t\t\t\theight: '78%',\r\n\t\t\t\t\t\t\t\t\t\tmarginLeft: '15rem',\r\n\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{typeConfirmPassword === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default PasswordResetPage;\r\n","import React, { useEffect } from 'react';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Table, Button } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport { listAllUsers, deleteUser, refreshLogin } from '../actions/userActions';\r\nimport Paginate from '../components/Paginate';\r\n\r\nconst UserListPage = ({ match, history }) => {\r\n\tconst pageNumber = match.params.pageNumber || 1; // to fetch various pages of orders\r\n\tconst dispatch = useDispatch();\r\n\tconst userList = useSelector((state) => state.userList);\r\n\tconst { loading, users, error, page, pages, total } = userList;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDelete = useSelector((state) => state.userDelete);\r\n\tconst { success: successDelete } = userDelete;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInfo && userInfo.isAdmin) dispatch(listAllUsers(pageNumber));\r\n\t\telse history.push('/login');\r\n\t}, [dispatch, history, userInfo, successDelete, pageNumber]);\r\n\r\n\tconst handleDelete = (id) => {\r\n\t\tif (window.confirm('Are you sure you wanna delete user?'))\r\n\t\t\tdispatch(deleteUser(id));\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1>Users ({`${total || 0}`})</h1>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : error ? (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t) : (\r\n\t\t\t\t<Table\r\n\t\t\t\t\tstriped\r\n\t\t\t\t\tbordered\r\n\t\t\t\t\tresponsive\r\n\t\t\t\t\tclassName='table-sm text-center'>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>NAME</th>\r\n\t\t\t\t\t\t\t<th>EMAIL</th>\r\n\t\t\t\t\t\t\t<th>CONFIRMED</th>\r\n\t\t\t\t\t\t\t<th>ADMIN</th>\r\n\t\t\t\t\t\t\t<th>ACTION</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{users &&\r\n\t\t\t\t\t\t\tusers.map((user) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<tr key={user._id}>\r\n\t\t\t\t\t\t\t\t\t\t<td>{user._id}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{user.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<a href={`mailto:${user.email}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{user.email}\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{user.isConfirmed ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-check'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'green' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'red' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{user.isAdmin ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-check'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'green' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: 'red' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-around',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/admin/user/${user._id}/edit`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleDelete(user._id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash' />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t)}\r\n\t\t\t<Paginate\r\n\t\t\t\tpages={pages}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tisAdmin={true}\r\n\t\t\t\tforUsers={true}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default UserListPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Form, Button, InputGroup } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport Meta from '../components/Meta';\r\nimport FormContainer from '../components/FormContainer';\r\nimport {\r\n\tgetUserDetails,\r\n\tupdateUser,\r\n\trefreshLogin,\r\n} from '../actions/userActions';\r\nimport { USER_UPDATE_RESET } from '../constants/userConstants';\r\n\r\nconst UserEditPage = ({ match, history }) => {\r\n\tconst userId = match.params.id;\r\n\tconst [name, setName] = useState('');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [isAdmin, setIsAdmin] = useState(false);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { loading, user, error } = userDetails;\r\n\r\n\tconst userUpdate = useSelector((state) => state.userUpdate);\r\n\tconst {\r\n\t\tloading: loadingUpdate,\r\n\t\terror: errorUpdate,\r\n\t\tsuccess: successUpdate,\r\n\t} = userUpdate;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\t// get new access tokens\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\t// update user details from the admin panel view\r\n\tuseEffect(() => {\r\n\t\tif (successUpdate) {\r\n\t\t\tdispatch({ type: USER_UPDATE_RESET });\r\n\t\t\thistory.push('/admin/userlist');\r\n\t\t} else {\r\n\t\t\tif (!user || !user.name || user._id !== userId) {\r\n\t\t\t\tdispatch(getUserDetails(userId));\r\n\t\t\t} else {\r\n\t\t\t\tsetName(user.name);\r\n\t\t\t\tsetEmail(user.email);\r\n\t\t\t\tsetIsAdmin(user.isAdmin);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [user, dispatch, userId, successUpdate, history]);\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(updateUser({ _id: userId, name, email, isAdmin }));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Link to='/admin/userlist'>\r\n\t\t\t\t<Button variant='outline-primary' className='my-3'>\r\n\t\t\t\t\tGo Back\r\n\t\t\t\t</Button>\r\n\t\t\t</Link>\r\n\t\t\t<FormContainer>\r\n\t\t\t\t{user && <Meta title={`Edit ${user.name} | Kosells`} />}\r\n\t\t\t\t<h1>Edit User</h1>\r\n\t\t\t\t{loadingUpdate ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : errorUpdate ? (\r\n\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t{errorUpdate}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='name' className='mb-2'>\r\n\t\t\t\t\t\t\t\t\t<Form.Label>Name</Form.Label>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Name'\r\n\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetName(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='email' className='my-2'>\r\n\t\t\t\t\t\t\t\t\t<Form.Label>Email Address</Form.Label>\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\t\t\t\tcontrolId='isAdmin'\r\n\t\t\t\t\t\t\t\t\tclassName='my-2'>\r\n\t\t\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t\t\t\ttype='checkbox'\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Is Admin'\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ borderRight: 'none' }}\r\n\t\t\t\t\t\t\t\t\t\t\tchecked={isAdmin}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetIsAdmin(e.target.checked)\r\n\t\t\t\t\t\t\t\t\t\t\t}></Form.Check>\r\n\t\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\tvariant='dark'\r\n\t\t\t\t\t\t\t\t\tclassName='my-1'>\r\n\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</FormContainer>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default UserEditPage;\r\n","import React, { useEffect } from 'react';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Table, Button, Row, Col } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport {\r\n\tlistProducts,\r\n\tdeleteProduct,\r\n\tcreateProduct,\r\n} from '../actions/productActions';\r\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants';\r\nimport Paginate from '../components/Paginate';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nconst ProductListPage = ({ history, match }) => {\r\n\tconst pageNumber = match.params.pageNumber || 1;\r\n\tconst dispatch = useDispatch();\r\n\tconst productList = useSelector((state) => state.productList);\r\n\tconst { loading, products, error, pages, page } = productList;\r\n\r\n\tconst productDelete = useSelector((state) => state.productDelete);\r\n\tconst {\r\n\t\tloading: loadingDelete,\r\n\t\tsuccess: successDelete,\r\n\t\terror: errorDelete,\r\n\t} = productDelete;\r\n\r\n\tconst productCreate = useSelector((state) => state.productCreate);\r\n\tconst {\r\n\t\tloading: loadingCreate,\r\n\t\tsuccess: successCreate,\r\n\t\terror: errorCreate,\r\n\t\tproduct: createdProduct,\r\n\t} = productCreate;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\t// fetch user login info\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// refresh token for expired access tokens\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!userInfo.isAdmin) history.push('/login');\r\n\t\tdispatch({ type: PRODUCT_CREATE_RESET }); //reset the new product detail\r\n\t\tif (successCreate)\r\n\t\t\thistory.push(`/admin/product/${createdProduct._id}/edit`);\r\n\t\telse dispatch(listProducts('', pageNumber, 10)); // 3rd parameter is the no of products to be listed per page\r\n\t}, [\r\n\t\tdispatch,\r\n\t\thistory,\r\n\t\tuserInfo,\r\n\t\tsuccessDelete,\r\n\t\tsuccessCreate,\r\n\t\tcreatedProduct,\r\n\t\tpageNumber,\r\n\t]);\r\n\r\n\t// delete product after confirming\r\n\tconst handleDelete = (id) => {\r\n\t\tif (window.confirm('Are you sure you wanna delete this product?'))\r\n\t\t\tdispatch(deleteProduct(id));\r\n\t};\r\n\t// create a new dummy product\r\n\tconst handleCreateProduct = () => {\r\n\t\tdispatch(createProduct());\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Row className='align-items-center'>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<h1>Products</h1>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName='my-3'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={handleCreateProduct}>\r\n\t\t\t\t\t\t<i className='fas fa-plus' /> Create Product\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t{errorDelete && (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{errorDelete}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{errorCreate && (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{errorCreate}\r\n\t\t\t\t</Message>\r\n\t\t\t)}\r\n\t\t\t{loading || loadingCreate || loadingDelete ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : error ? (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tstriped\r\n\t\t\t\t\t\tbordered\r\n\t\t\t\t\t\tresponsive\r\n\t\t\t\t\t\tclassName='table-sm text-center'>\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t\t<th>NAME</th>\r\n\t\t\t\t\t\t\t\t<th>PRICE</th>\r\n\t\t\t\t\t\t\t\t<th>CATEGORY</th>\r\n\t\t\t\t\t\t\t\t<th>BRAND</th>\r\n\t\t\t\t\t\t\t\t<th>ACTION</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{products &&\r\n\t\t\t\t\t\t\t\tproducts.map((product) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={product._id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{product._id}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{product.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{product.price &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tproduct.price.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{product.category}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{product.brand}</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'space-around',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/admin/product/${product._id}/edit`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-edit' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleDelete(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproduct._id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='danger'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '0.9em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-trash'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t\t<Paginate pages={pages} page={page} isAdmin={true} />\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProductListPage;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Form, Button, Image, FloatingLabel, Row, Col } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { listProductDetails, updateProduct } from '../actions/productActions';\r\nimport { PRODUCT_UPDATE_RESET } from '../constants/productConstants';\r\nimport axios from 'axios';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nimport FormContainer from '../components/FormContainer';\r\n\r\nconst ProductEditPage = ({ match, history }) => {\r\n\t// all variable for stroing product details\r\n\tconst productId = match.params.id;\r\n\tconst [name, setName] = useState('');\r\n\tconst [brand, setBrand] = useState('');\r\n\tconst [category, setCategory] = useState('');\r\n\tconst [description, setDescription] = useState('');\r\n\tconst [image, setImage] = useState('');\r\n\tconst [price, setPrice] = useState(0.0);\r\n\tconst [countInStock, setCountInStock] = useState(0);\r\n\r\n\t// to upload product image\r\n\tconst [uploading, setUploading] = useState(false);\r\n\tconst [errorImageUpload, setErrorImageUpload] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst productDetails = useSelector((state) => state.productDetails);\r\n\tconst { loading, product, error } = productDetails;\r\n\r\n\tconst productUpdate = useSelector((state) => state.productUpdate);\r\n\tconst {\r\n\t\tloading: loadingUpdate,\r\n\t\tsuccess: successUpdate,\r\n\t\terror: errorUpdate,\r\n\t} = productUpdate;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\t// fetch user login details\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// fetch new access tokens if user details fail, using the refresh token\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(listProductDetails(productId));\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\t// update the product details in state\r\n\tuseEffect(() => {\r\n\t\tif (successUpdate) {\r\n\t\t\tdispatch({ type: PRODUCT_UPDATE_RESET });\r\n\t\t\thistory.push('/admin/productlist');\r\n\t\t} else {\r\n\t\t\tif (!product || product._id !== productId) {\r\n\t\t\t\tdispatch(listProductDetails(productId));\r\n\t\t\t} else {\r\n\t\t\t\tsetName(product.name);\r\n\t\t\t\tsetPrice(product.price);\r\n\t\t\t\tsetImage(product.image);\r\n\t\t\t\tsetBrand(product.brand);\r\n\t\t\t\tsetCategory(product.category);\r\n\t\t\t\tsetDescription(product.description);\r\n\t\t\t\tsetCountInStock(product.countInStock);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [product, dispatch, productId, history, successUpdate]);\r\n\r\n\t// submit the product details\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(\r\n\t\t\tupdateProduct({\r\n\t\t\t\t_id: productId,\r\n\t\t\t\tname,\r\n\t\t\t\tbrand,\r\n\t\t\t\tprice,\r\n\t\t\t\tcategory,\r\n\t\t\t\tdescription,\r\n\t\t\t\tcountInStock,\r\n\t\t\t\timage,\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\t// for image input, use a ref\r\n\tconst inputFile = useRef(null);\r\n\r\n\t// click the above ref, to handle the overlay div above the product image\r\n\tconst handleImageClick = () => {\r\n\t\tinputFile.current.click();\r\n\t};\r\n\r\n\t// submit file to aws bucket, get the url\r\n\tconst handleFileUpload = async (e) => {\r\n\t\tconst file = e.target.files[0];\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('image', file);\r\n\t\tsetUploading(true);\r\n\t\ttry {\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tconst { data } = await axios.post('/api/upload', formData, config);\r\n\t\t\tsetImage(data);\r\n\t\t\tsetUploading(false);\r\n\t\t} catch (error) {\r\n\t\t\tsetErrorImageUpload('Please choose a valid image');\r\n\t\t\tsetUploading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Link to='/admin/productlist'>\r\n\t\t\t\t<Button variant='outline-primary' className='mt-3'>\r\n\t\t\t\t\tGo Back\r\n\t\t\t\t</Button>\r\n\t\t\t</Link>\r\n\t\t\t<FormContainer style={{ marginTop: '-2em' }}>\r\n\t\t\t\t<h1>Edit Product</h1>\r\n\t\t\t\t{loadingUpdate ? (\r\n\t\t\t\t\t<Loader />\r\n\t\t\t\t) : errorUpdate ? (\r\n\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t{errorUpdate}\r\n\t\t\t\t\t</Message>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='name'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='nameinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Name'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Name'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetName(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='price'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='priceinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Price'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter price'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={price}\r\n\t\t\t\t\t\t\t\t\t\t\tmin='0'\r\n\t\t\t\t\t\t\t\t\t\t\tmax='1000'\r\n\t\t\t\t\t\t\t\t\t\t\tstep='0.1'\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetPrice(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t{errorImageUpload && (\r\n\t\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\t\tdismissible\r\n\t\t\t\t\t\t\t\t\t\tvariant='danger'\r\n\t\t\t\t\t\t\t\t\t\tduration={10}>\r\n\t\t\t\t\t\t\t\t\t\t{errorImageUpload}\r\n\t\t\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{uploading ? (\r\n\t\t\t\t\t\t\t\t\t<div>Uploading...</div>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId='image'>\r\n\t\t\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col md={9}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='imageinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel='Image URL'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter image URL'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetImage(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t\t<Col md={3}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taccept='image/*'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='file'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid='file'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tref={inputFile}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleFileUpload}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='profile-page-image'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talignSelf: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle='Click to input file'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder: '1px solid #ced4da',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginBottom: '1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'0.25rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='image-overlay-product'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleImageClick\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tClick to upload image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='brand'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='brandinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Brand'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter brand'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={brand}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetBrand(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='category'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='categoryinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Category'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter category'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={category}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCategory(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='description'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='descinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Description'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter description URL'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={description}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetDescription(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='countInStock'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='countinstockinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='CountInStock'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Count In Stock'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\t\t\t\t\t\tmin='0'\r\n\t\t\t\t\t\t\t\t\t\t\tmax='1000'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={countInStock}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCountInStock(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<div className='d-flex'>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\tclassName='my-1 ms-auto'>\r\n\t\t\t\t\t\t\t\t\t\tUpdate Product\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</FormContainer>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProductEditPage;\r\n","import React, { useEffect } from 'react';\r\nimport { LinkContainer } from 'react-router-bootstrap';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Table, Button, Row, Col } from 'react-bootstrap';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport Paginate from '../components/Paginate';\r\nimport { refreshLogin } from '../actions/userActions';\r\nimport { listAllOrders } from '../actions/orderActions';\r\nimport getDateString from '../utils/getDateString';\r\n\r\nconst ProductListPage = ({ history, match }) => {\r\n\tconst pageNumber = match.params.pageNumber || 1; // to fetch various pages of orders\r\n\tconst dispatch = useDispatch();\r\n\tconst orderListAll = useSelector((state) => state.orderListAll); // to avoid blank screen display\r\n\tconst { loading, orders, error, page, pages, total } = orderListAll;\r\n\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error: userLoginError } = userDetails;\r\n\r\n\t// refresh access tokens aif user details are failed\r\n\tuseEffect(() => {\r\n\t\tif (userLoginError && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [userLoginError, dispatch, userInfo]);\r\n\r\n\t// get all orders by pagenumber\r\n\tuseEffect(() => {\r\n\t\tif (userInfo && userInfo.isAdmin) dispatch(listAllOrders(pageNumber));\r\n\t\telse history.push('/login');\r\n\t}, [dispatch, history, userInfo, pageNumber]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Row className='align-items-center'>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<h1>All Orders ({`${total || 0}`})</h1>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<Loader />\r\n\t\t\t) : error ? (\r\n\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</Message>\r\n\t\t\t) : (\r\n\t\t\t\t<Table\r\n\t\t\t\t\tstriped\r\n\t\t\t\t\tbordered\r\n\t\t\t\t\tresponsive\r\n\t\t\t\t\tclassName='table-sm text-center'>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>USER</th>\r\n\t\t\t\t\t\t\t<th>TOTAL</th>\r\n\t\t\t\t\t\t\t<th>DATE</th>\r\n\t\t\t\t\t\t\t<th>PAID</th>\r\n\t\t\t\t\t\t\t<th>DELIVERED</th>\r\n\t\t\t\t\t\t\t<th>ACTION</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{orders &&\r\n\t\t\t\t\t\t\torders.map((order) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<tr key={order._id}>\r\n\t\t\t\t\t\t\t\t\t\t<td>{order._id}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{order.user && order.user.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{order.totalPrice.toLocaleString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'en-IN',\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaximumFractionDigits: 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle: 'currency',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrency: 'INR',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{getDateString(order.createdAt)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{order.isPaid ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetDateString(order.paidAt)\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'red',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t{order.isDelivered ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetDateString(order.deliveredAt)\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fas fa-times'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'red',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'space-around',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<LinkContainer\r\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/order/${order._id}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn-sm'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tView Details\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t)}\r\n\t\t\t<Paginate\r\n\t\t\t\tpages={pages}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tisAdmin={true}\r\n\t\t\t\tforOrders={true}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ProductListPage;\r\n","export default __webpack_public_path__ + \"static/media/404Error.0ed04e00.png\";","import React from 'react';\r\nimport errorImg from '../assets/404Error.png';\r\nimport { Link } from 'react-router-dom';\r\nimport '../styles/error-page.css';\r\n\r\n// 404 page\r\nconst ErrorPage = () => {\r\n\treturn (\r\n\t\t<div className='text-center'>\r\n\t\t\t<img className='error-img' alt='error' src={errorImg} />\r\n\t\t\t<p className='mb-0 mt-3 text-error'>\r\n\t\t\t\t<i className='far fa-frown' /> Looks like this page does not\r\n\t\t\t\texist.\r\n\t\t\t</p>\r\n\t\t\t<p className='mt-0 text-error'>\r\n\t\t\t\tGo Back to the <Link to='/'>Home Page</Link>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ErrorPage;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t\t// [::1] is the IPv6 localhost address.\r\n\t\twindow.location.hostname === '[::1]' ||\r\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\t\twindow.location.hostname.match(\r\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t\t'worker. To learn more, visit https://cra.link/PWA'\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then((registration) => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://cra.link/PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { 'Service-Worker': 'script' },\r\n\t})\r\n\t\t.then((response) => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null &&\r\n\t\t\t\t\tcontentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then((registration) => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ToastContainer, Toast } from 'react-bootstrap';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport './styles/update-toast.css';\r\n\r\nconst ServiceWorkerWrapper = () => {\r\n\tconst [showReload, setShowReload] = useState(false);\r\n\tconst [waitingWorker, setWaitingWorker] = useState(null);\r\n\r\n\tconst onSWUpdate = (registration) => {\r\n\t\tsetShowReload(true);\r\n\t\tsetWaitingWorker(registration.waiting);\r\n\t};\r\n\r\n\t// register the service worker on page load\r\n\tuseEffect(() => {\r\n\t\tserviceWorkerRegistration.register({ onUpdate: onSWUpdate });\r\n\t}, []);\r\n\r\n\t// skip waiting and install new updates on page reload\r\n\tconst reloadPage = () => {\r\n\t\twaitingWorker?.postMessage({ type: 'SKIP_WAITING' });\r\n\t\tsetShowReload(false);\r\n\t\twindow.location.reload(true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ToastContainer className='update-toast' onClick={reloadPage}>\r\n\t\t\t<Toast show={showReload} onClose={reloadPage} bg='dark'>\r\n\t\t\t\t<Toast.Header>\r\n\t\t\t\t\t<strong className='me-auto text-black'>\r\n\t\t\t\t\t\tNew Version Available\r\n\t\t\t\t\t</strong>\r\n\t\t\t\t</Toast.Header>\r\n\t\t\t\t<Toast.Body className='text-white'>\r\n\t\t\t\t\tReload to see whats new!\r\n\t\t\t\t</Toast.Body>\r\n\t\t\t</Toast>\r\n\t\t</ToastContainer>\r\n\t);\r\n};\r\n\r\nexport default ServiceWorkerWrapper;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport { Container } from 'react-bootstrap';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\n\r\nimport HomePage from './pages/HomePage';\r\nimport ProductPage from './pages/ProductPage';\r\nimport CartPage from './pages/CartPage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport ProfilePage from './pages/ProfilePage';\r\nimport ConfirmPage from './pages/ConfirmPage';\r\nimport ShippingPage from './pages/ShippingPage';\r\nimport PaymentPage from './pages/PaymentPage';\r\nimport PlaceOrderPage from './pages/PlaceOrderPage';\r\nimport OrderPage from './pages/OrderPage';\r\nimport PasswordResetPage from './pages/PasswordResetPage';\r\nimport UserListPage from './pages/UserListPage';\r\nimport UserEditPage from './pages/UserEditPage';\r\nimport ProductListPage from './pages/ProductListPage';\r\nimport ProductEditPage from './pages/ProductEditPage';\r\nimport OrderListPage from './pages/OrderListPage';\r\nimport ErrorPage from './pages/ErrorPage';\r\n\r\n// for showing the 'new update available' banner and to register the service worker\r\nimport ServiceWorkerWrapper from './ServiceWorkerWrapper';\r\n\r\nconst App = () => {\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<Header />\r\n\t\t\t<ServiceWorkerWrapper />\r\n\r\n\t\t\t<main className='py-2'>\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path='/' component={HomePage} exact />\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/search/:keyword'\r\n\t\t\t\t\t\t\tcomponent={HomePage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/page/:pageNumber'\r\n\t\t\t\t\t\t\tcomponent={HomePage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/search/:keyword/page/:pageNumber'\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tcomponent={HomePage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route path='/login' component={LoginPage} />\r\n\t\t\t\t\t\t<Route path='/register' component={RegisterPage} />\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/user/password/reset/:token'\r\n\t\t\t\t\t\t\tcomponent={PasswordResetPage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route path='/profile' component={ProfilePage} />\r\n\t\t\t\t\t\t<Route path='/product/:id' component={ProductPage} />\r\n\t\t\t\t\t\t<Route path='/cart/:id?' component={CartPage} />\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/user/confirm/:token'\r\n\t\t\t\t\t\t\tcomponent={ConfirmPage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route path='/shipping' component={ShippingPage} />\r\n\t\t\t\t\t\t<Route path='/payment' component={PaymentPage} />\r\n\t\t\t\t\t\t<Route path='/placeorder' component={PlaceOrderPage} />\r\n\t\t\t\t\t\t<Route path='/order/:id' component={OrderPage} />\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/userlist'\r\n\t\t\t\t\t\t\tcomponent={UserListPage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/userlist/:pageNumber'\r\n\t\t\t\t\t\t\tcomponent={UserListPage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/user/:id/edit'\r\n\t\t\t\t\t\t\tcomponent={UserEditPage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/productlist'\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tcomponent={ProductListPage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/productlist/:pageNumber'\r\n\t\t\t\t\t\t\tcomponent={ProductListPage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/product/:id/edit'\r\n\t\t\t\t\t\t\tcomponent={ProductEditPage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/orderlist'\r\n\t\t\t\t\t\t\tcomponent={OrderListPage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/admin/orderlist/:pageNumber'\r\n\t\t\t\t\t\t\tcomponent={OrderListPage}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route component={ErrorPage} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Container>\r\n\t\t\t</main>\r\n\t\t\t<Footer />\r\n\t\t</Router>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import { createStore, applyMiddleware, combineReducers } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nimport {\r\n\tproductListReducer,\r\n\tproductDetailsReducer,\r\n\tproductDeleteReducer,\r\n\tproductCreateReducer,\r\n\tproductCreateReviewReducer,\r\n\tproductUpdateReducer,\r\n\tproductTopRatedReducer,\r\n} from './reducers/productReducers';\r\n\r\nimport { cartReducer } from './reducers/cartReducers';\r\n\r\nimport {\r\n\tuserLoginReducer,\r\n\tuserLoginRefreshReducer,\r\n\tuserRegisterReducer,\r\n\tuserSendEmailVerficationReducer,\r\n\tuserConfirmReducer,\r\n\tuserResetPasswordReducer,\r\n\tuserDetailsReducer,\r\n\tuserProfileUpdateReducer,\r\n\tuserListReducer,\r\n\tuserDeleteReducer,\r\n\tuserUpdateReducer,\r\n} from './reducers/userReducers';\r\n\r\nimport {\r\n\torderCreateReducer,\r\n\torderDetailsReducer,\r\n\torderPayReducer,\r\n\torderDeliverReducer,\r\n\torderListUserReducer,\r\n\torderListAllReducer,\r\n} from './reducers/orderReducers';\r\n\r\n// combine all the above reducers to the store\r\nconst reducer = combineReducers({\r\n\tproductList: productListReducer,\r\n\tproductDetails: productDetailsReducer,\r\n\tproductDelete: productDeleteReducer,\r\n\tproductCreate: productCreateReducer,\r\n\tproductCreateReview: productCreateReviewReducer,\r\n\tproductUpdate: productUpdateReducer,\r\n\tproductTopRated: productTopRatedReducer,\r\n\tcart: cartReducer,\r\n\tuserLogin: userLoginReducer,\r\n\tuserLoginRefresh: userLoginRefreshReducer,\r\n\tuserRegister: userRegisterReducer,\r\n\tuserSendEmailVerfication: userSendEmailVerficationReducer,\r\n\tuserConfirm: userConfirmReducer,\r\n\tuserResetPassword: userResetPasswordReducer,\r\n\tuserDetails: userDetailsReducer,\r\n\tuserProfileUpdate: userProfileUpdateReducer,\r\n\tuserList: userListReducer,\r\n\tuserDelete: userDeleteReducer,\r\n\tuserUpdate: userUpdateReducer,\r\n\torderCreate: orderCreateReducer,\r\n\torderDetails: orderDetailsReducer,\r\n\torderPay: orderPayReducer,\r\n\torderDeliver: orderDeliverReducer,\r\n\torderListUser: orderListUserReducer,\r\n\torderListAll: orderListAllReducer,\r\n});\r\n\r\n// get a few cart items from the local storage\r\nconst cartItemsFromLocalStorage = localStorage.getItem('cartItems')\r\n\t? JSON.parse(localStorage.getItem('cartItems'))\r\n\t: [];\r\n\r\n// get the user info from local storage\r\nconst userInfoFromLocalStorage = localStorage.getItem('userInfo')\r\n\t? JSON.parse(localStorage.getItem('userInfo'))\r\n\t: null;\r\n\r\n// get the shipping address from local storage\r\nconst shippingAddressFromLocalStorage = localStorage.getItem('shippingAddress')\r\n\t? JSON.parse(localStorage.getItem('shippingAddress'))\r\n\t: {};\r\n\r\n// get refresh token from the local storage\r\nconst tokenInfoFromLocalStoage = localStorage.getItem('refreshToken')\r\n\t? localStorage.getItem('refreshToken')\r\n\t: null;\r\n\r\n// set the initial state based on above local storage values\r\nconst initialState = {\r\n\tcart: {\r\n\t\tcartItems: [...cartItemsFromLocalStorage],\r\n\t\tshippingAddress: shippingAddressFromLocalStorage,\r\n\t},\r\n\tuserLogin: {\r\n\t\tuserInfo: userInfoFromLocalStorage,\r\n\t},\r\n\tuserLoginRefresh: {\r\n\t\ttokenInfo: tokenInfoFromLocalStoage,\r\n\t},\r\n};\r\n\r\n// user redux thunk for making async calls\r\nconst middleware = [thunk];\r\n\r\n// create the redux store\r\nconst store = createStore(\r\n\treducer,\r\n\tinitialState,\r\n\tcomposeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n","import {\r\n\tPRODUCT_LIST_REQUEST,\r\n\tPRODUCT_LIST_SUCCESS,\r\n\tPRODUCT_LIST_FAILURE,\r\n\tPRODUCT_DETAILS_FAILURE,\r\n\tPRODUCT_DETAILS_REQUEST,\r\n\tPRODUCT_DETAILS_SUCCESS,\r\n\tPRODUCT_DELETE_FAILURE,\r\n\tPRODUCT_DELETE_REQUEST,\r\n\tPRODUCT_DELETE_SUCCESS,\r\n\tPRODUCT_CREATE_SUCCESS,\r\n\tPRODUCT_CREATE_FAILURE,\r\n\tPRODUCT_CREATE_REQUEST,\r\n\tPRODUCT_CREATE_RESET,\r\n\tPRODUCT_UPDATE_SUCCESS,\r\n\tPRODUCT_UPDATE_FAILURE,\r\n\tPRODUCT_UPDATE_REQUEST,\r\n\tPRODUCT_UPDATE_RESET,\r\n\tPRODUCT_CREATE_REVIEW_SUCCESS,\r\n\tPRODUCT_CREATE_REVIEW_FAILURE,\r\n\tPRODUCT_CREATE_REVIEW_REQUEST,\r\n\tPRODUCT_CREATE_REVIEW_RESET,\r\n\tPRODUCT_TOP_RATED_SUCCESS,\r\n\tPRODUCT_TOP_RATED_FAILURE,\r\n\tPRODUCT_TOP_RATED_REQUEST,\r\n} from '../constants/productConstants';\r\n\r\n// list products based on keyword and paginated page number\r\nexport const productListReducer = (state = { products: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_LIST_REQUEST:\r\n\t\t\treturn { loading: true, products: [] };\r\n\r\n\t\tcase PRODUCT_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tproducts: action.payload.products,\r\n\t\t\t\tpage: action.payload.page,\r\n\t\t\t\tpages: action.payload.pages,\r\n\t\t\t};\r\n\r\n\t\tcase PRODUCT_LIST_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\r\n\t\tdefault:\r\n\t\t\treturn { state };\r\n\t}\r\n};\r\n\r\n// details about a particular product\r\nexport const productDetailsReducer = (\r\n\tstate = { product: { reviews: [] } },\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_DETAILS_REQUEST:\r\n\t\t\treturn { loading: true, ...state };\r\n\t\tcase PRODUCT_DETAILS_SUCCESS:\r\n\t\t\treturn { loading: false, product: action.payload };\r\n\t\tcase PRODUCT_DETAILS_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productDeleteReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_DELETE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_DELETE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase PRODUCT_DELETE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productCreateReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_CREATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_CREATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true, product: action.payload };\r\n\t\tcase PRODUCT_CREATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase PRODUCT_CREATE_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productCreateReviewReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_CREATE_REVIEW_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_CREATE_REVIEW_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase PRODUCT_CREATE_REVIEW_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase PRODUCT_CREATE_REVIEW_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const productUpdateReducer = (state = { product: {} }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_UPDATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase PRODUCT_UPDATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true, product: action.payload };\r\n\t\tcase PRODUCT_UPDATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase PRODUCT_UPDATE_RESET:\r\n\t\t\treturn { product: {} };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// fetching top rated products\r\nexport const productTopRatedReducer = (state = { products: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PRODUCT_TOP_RATED_REQUEST:\r\n\t\t\treturn { loading: true, products: [] };\r\n\t\tcase PRODUCT_TOP_RATED_SUCCESS:\r\n\t\t\treturn { loading: false, products: action.payload };\r\n\t\tcase PRODUCT_TOP_RATED_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import {\r\n\tCART_ADD_ITEM,\r\n\tCART_REMOVE_ITEM,\r\n\tCART_SAVE_SHIPPING_ADDRESS,\r\n\tCART_SAVE_PAYMENT_METHOD,\r\n\tCART_RESET,\r\n} from '../constants/cartConstants';\r\n\r\nexport const cartReducer = (\r\n\tstate = { cartItems: [], shippingAddress: {} },\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase CART_ADD_ITEM:\r\n\t\t\tconst item = action.payload;\r\n\r\n\t\t\t// check if the item exists in the cart\r\n\t\t\tconst existingItem = state.cartItems.find(\r\n\t\t\t\t(ele) => ele.product === item.product\r\n\t\t\t);\r\n\t\t\tif (existingItem) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcartItems: state.cartItems.map((ele) =>\r\n\t\t\t\t\t\tele.product === existingItem.product ? item : ele\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tcartItems: [...state.cartItems, item],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\tcase CART_REMOVE_ITEM:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcartItems: state.cartItems.filter(\r\n\t\t\t\t\t(ele) => ele.product !== action.payload\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\tcase CART_SAVE_SHIPPING_ADDRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshippingAddress: action.payload,\r\n\t\t\t};\r\n\t\tcase CART_SAVE_PAYMENT_METHOD:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpaymentMethod: action.payload,\r\n\t\t\t};\r\n\t\tcase CART_RESET: {\r\n\t\t\treturn {\r\n\t\t\t\tcartItems: [],\r\n\t\t\t\tshippingAddress: action.payload,\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import {\r\n\tUSER_LOGIN_FAILURE,\r\n\tUSER_LOGIN_REQUEST,\r\n\tUSER_LOGIN_SUCCESS,\r\n\tUSER_LOGOUT,\r\n\tUSER_REGISTER_FAILURE,\r\n\tUSER_REGISTER_SUCCESS,\r\n\tUSER_REGISTER_REQUEST,\r\n\tUSER_RESET_PASSWORD_FAILURE,\r\n\tUSER_RESET_PASSWORD_SUCCESS,\r\n\tUSER_RESET_PASSWORD_REQUEST,\r\n\tUSER_EMAIL_VERIFICATION_REQUEST,\r\n\tUSER_EMAIL_VERIFICATION_SUCCESS,\r\n\tUSER_EMAIL_VERIFICATION_FAILURE,\r\n\tUSER_CONFIRM_REQUEST,\r\n\tUSER_CONFIRM_SUCCESS,\r\n\tUSER_CONFIRM_FAILURE,\r\n\tUSER_DETAILS_FAILURE,\r\n\tUSER_DETAILS_SUCCESS,\r\n\tUSER_DETAILS_REQUEST,\r\n\tUSER_DETAILS_RESET,\r\n\tUSER_PROFILE_UPDATE_REQUEST,\r\n\tUSER_PROFILE_UPDATE_SUCCESS,\r\n\tUSER_PROFILE_UPDATE_FAILURE,\r\n\tUSER_PROFILE_UPDATE_RESET,\r\n\tUSER_LOGIN_REFRESH_REQUEST,\r\n\tUSER_LOGIN_REFRESH_SUCCESS,\r\n\tUSER_LOGIN_REFRESH_FAILURE,\r\n\tUSER_LIST_REQUEST,\r\n\tUSER_LIST_SUCCESS,\r\n\tUSER_LIST_FAILURE,\r\n\tUSER_LIST_RESET,\r\n\tUSER_DELETE_REQUEST,\r\n\tUSER_DELETE_SUCCESS,\r\n\tUSER_DELETE_FAILURE,\r\n\tUSER_UPDATE_REQUEST,\r\n\tUSER_UPDATE_SUCCESS,\r\n\tUSER_UPDATE_FAILURE,\r\n\tUSER_UPDATE_RESET,\r\n} from '../constants/userConstants';\r\n\r\nexport const userLoginReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_LOGIN_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_LOGIN_SUCCESS:\r\n\t\t\treturn { loading: false, userInfo: action.payload };\r\n\t\tcase USER_LOGIN_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_LOGOUT:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// use refresh token to obtain new access token for the logged in user\r\nexport const userLoginRefreshReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_LOGIN_REFRESH_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_LOGIN_REFRESH_SUCCESS:\r\n\t\t\treturn { loading: false, tokenInfo: action.payload };\r\n\t\tcase USER_LOGIN_REFRESH_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// sending an email for account verification\r\nexport const userSendEmailVerficationReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_EMAIL_VERIFICATION_REQUEST:\r\n\t\t\treturn { isLoading: true };\r\n\t\tcase USER_EMAIL_VERIFICATION_SUCCESS:\r\n\t\t\treturn { isLoading: true, emailSent: action.payload };\r\n\t\tcase USER_EMAIL_VERIFICATION_FAILURE:\r\n\t\t\treturn { isLoading: true, hasError: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update user account to confirmed\r\nexport const userConfirmReducer = (state = { isConfirmed: false }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_CONFIRM_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_CONFIRM_SUCCESS:\r\n\t\t\treturn { loading: false, isConfirmed: action.payload };\r\n\t\tcase USER_CONFIRM_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// reset the user password\r\nexport const userResetPasswordReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_RESET_PASSWORD_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_RESET_PASSWORD_SUCCESS:\r\n\t\t\treturn { loading: false, resetPassword: action.payload };\r\n\t\tcase USER_RESET_PASSWORD_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault: {\r\n\t\t\treturn { ...state };\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// register user using email and password\r\nexport const userRegisterReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_REGISTER_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_REGISTER_SUCCESS:\r\n\t\t\treturn { loading: false, userInfo: action.payload };\r\n\t\tcase USER_REGISTER_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// fetch user details\r\nexport const userDetailsReducer = (state = { user: {} }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_DETAILS_REQUEST:\r\n\t\t\treturn { ...state, loading: true };\r\n\t\tcase USER_DETAILS_SUCCESS:\r\n\t\t\treturn { loading: false, user: action.payload };\r\n\t\tcase USER_DETAILS_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_DETAILS_RESET:\r\n\t\t\treturn { user: {} };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update user profile, not in admin view\r\nexport const userProfileUpdateReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_PROFILE_UPDATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_PROFILE_UPDATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true, userInfo: action.payload };\r\n\t\tcase USER_PROFILE_UPDATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_PROFILE_UPDATE_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// list all users for the admin view\r\nexport const userListReducer = (state = { users: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_LIST_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tusers: action.payload.users,\r\n\t\t\t\tpage: action.payload.page,\r\n\t\t\t\tpages: action.payload.pages,\r\n\t\t\t\ttotal: action.payload.total,\r\n\t\t\t};\r\n\t\tcase USER_LIST_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_LIST_RESET:\r\n\t\t\treturn { users: [] };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\nexport const userDeleteReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_DELETE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_DELETE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase USER_DELETE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update user from the admin panel view\r\nexport const userUpdateReducer = (state = { user: {} }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase USER_UPDATE_REQUEST:\r\n\t\t\treturn { loading: true };\r\n\t\tcase USER_UPDATE_SUCCESS:\r\n\t\t\treturn { loading: false, success: true };\r\n\t\tcase USER_UPDATE_FAILURE:\r\n\t\t\treturn { loading: false, error: action.payload };\r\n\t\tcase USER_UPDATE_RESET:\r\n\t\t\treturn { user: {} };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import {\r\n\tORDER_CREATE_REQUEST,\r\n\tORDER_CREATE_SUCCESS,\r\n\tORDER_CREATE_FAILURE,\r\n\tORDER_CREATE_RESET,\r\n\tORDER_DETAILS_REQUEST,\r\n\tORDER_DETAILS_SUCCESS,\r\n\tORDER_DETAILS_FAILURE,\r\n\tORDER_PAY_REQUEST,\r\n\tORDER_PAY_SUCCESS,\r\n\tORDER_PAY_FAILURE,\r\n\tORDER_PAY_RESET,\r\n\tORDER_DELIVER_REQUEST,\r\n\tORDER_DELIVER_SUCCESS,\r\n\tORDER_DELIVER_FAILURE,\r\n\tORDER_DELIVER_RESET,\r\n\tORDER_USER_LIST_REQUEST,\r\n\tORDER_USER_LIST_SUCCESS,\r\n\tORDER_USER_LIST_FAILURE,\r\n\tORDER_USER_LIST_RESET,\r\n\tORDER_ALL_LIST_REQUEST,\r\n\tORDER_ALL_LIST_SUCCESS,\r\n\tORDER_ALL_LIST_FAILURE,\r\n} from '../constants/orderConstants';\r\n\r\n// create an order\r\nexport const orderCreateReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_CREATE_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_CREATE_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t\torder: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_CREATE_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_CREATE_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// get order details\r\nexport const orderDetailsReducer = (\r\n\tstate = { loading: true, orderItems: [], shippingAddress: {} },\r\n\taction\r\n) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_DETAILS_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_DETAILS_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\torder: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_DETAILS_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update order payment options\r\nexport const orderPayReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_PAY_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_PAY_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t};\r\n\t\tcase ORDER_PAY_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_PAY_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// update order to be delivered or not\r\nexport const orderDeliverReducer = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_DELIVER_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_DELIVER_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tsuccess: true,\r\n\t\t\t};\r\n\t\tcase ORDER_DELIVER_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_DELIVER_RESET:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// reducer to list orders of the particular user\r\nexport const orderListUserReducer = (state = { orders: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_USER_LIST_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_USER_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\torders: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_USER_LIST_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\t\tcase ORDER_USER_LIST_RESET:\r\n\t\t\treturn { orders: [] };\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n\r\n// reducer to list all orders for the admin panel view\r\nexport const orderListAllReducer = (state = { orders: [] }, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ORDER_ALL_LIST_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t};\r\n\t\tcase ORDER_ALL_LIST_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\torders: action.payload.orders,\r\n\t\t\t\tpage: action.payload.page,\r\n\t\t\t\tpages: action.payload.pages,\r\n\t\t\t\ttotal: action.payload.total,\r\n\t\t\t};\r\n\t\tcase ORDER_ALL_LIST_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload,\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn { ...state };\r\n\t}\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport store from './store';\r\nimport { HelmetProvider } from 'react-helmet-async';\r\nimport './bootstrap.min.css';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<React.StrictMode>\r\n\t\t\t<HelmetProvider>\r\n\t\t\t\t<App />\r\n\t\t\t</HelmetProvider>\r\n\t\t</React.StrictMode>\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n"],"sourceRoot":""}